<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chez Rose Chocolaterie | Chocolats Artisanaux Ã  Puttelange-aux-Lacs</title>
    <meta name="description" content="DÃ©couvrez la Chocolaterie Chez Rose Ã  Puttelange-aux-Lacs. Chocolats artisanaux, ballotins, dragÃ©es Avola et crÃ©ations gourmandes.">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,500;0,600;0,700;1,400&family=Montserrat:wght@300;400;500;600&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --rose-light: #f8e8e8;
            --rose: #e8a4a4;
            --rose-dark: #c47a7a;
            --rose-accent: #d4848f;
            --chocolat-light: #8b6f5c;
            --chocolat: #5c4033;
            --chocolat-dark: #3d2b22;
            --creme: #faf7f2;
            --or: #c9a86c;
            --or-light: #e8d5b0;
            --blanc: #ffffff;
            --text-dark: #2d1f1a;
            --text-light: #6b5b54;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        html {
            scroll-behavior: smooth;
        }
        
        body {
            font-family: 'Montserrat', sans-serif;
            background-color: var(--creme);
            color: var(--text-dark);
            line-height: 1.7;
            overflow-x: hidden;
        }
        
        h1, h2, h3, h4 {
            font-family: 'Cormorant Garamond', serif;
            font-weight: 500;
            letter-spacing: 0.02em;
        }
        
        /* Navigation */
        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 1000;
            padding: 1.5rem 5%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.4s ease;
        }
        
        .navbar.scrolled {
            background: rgba(250, 247, 242, 0.95);
            backdrop-filter: blur(10px);
            padding: 1rem 5%;
            box-shadow: 0 2px 30px rgba(93, 64, 51, 0.1);
        }
        
        .nav-logo {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.8rem;
            font-weight: 600;
            color: var(--chocolat-dark);
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .nav-logo span {
            color: var(--rose-dark);
        }
        
        .nav-links {
            display: flex;
            gap: 2.5rem;
            list-style: none;
        }
        
        .nav-links a {
            text-decoration: none;
            color: var(--chocolat);
            font-size: 0.9rem;
            font-weight: 500;
            letter-spacing: 0.05em;
            text-transform: uppercase;
            position: relative;
            padding-bottom: 0.3rem;
            transition: color 0.3s ease;
        }
        
        .nav-links a::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background: linear-gradient(90deg, var(--rose), var(--rose-dark));
            transition: width 0.3s ease;
        }
        
        .nav-links a:hover {
            color: var(--rose-dark);
        }
        
        .nav-links a:hover::after {
            width: 100%;
        }
        
        .menu-toggle {
            display: none;
            flex-direction: column;
            gap: 5px;
            cursor: pointer;
            z-index: 1001;
        }
        
        .menu-toggle span {
            width: 28px;
            height: 2px;
            background: var(--chocolat);
            transition: all 0.3s ease;
        }
        
        /* Hero Section */
        .hero {
            min-height: 100vh;
            display: flex;
            align-items: center;
            position: relative;
            overflow: hidden;
            background: linear-gradient(135deg, var(--creme) 0%, var(--rose-light) 100%);
        }
        
        .hero-bg-pattern {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(circle at 20% 80%, rgba(232, 164, 164, 0.2) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(201, 168, 108, 0.15) 0%, transparent 40%),
                radial-gradient(circle at 50% 50%, rgba(92, 64, 51, 0.05) 0%, transparent 60%);
            pointer-events: none;
        }
        
        .hero-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 4rem;
            padding: 8rem 8%;
            align-items: center;
            width: 100%;
            position: relative;
            z-index: 2;
        }
        
        .hero-text {
            animation: fadeInUp 1s ease-out;
        }
        
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(40px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .hero-badge {
            display: inline-block;
            background: linear-gradient(135deg, var(--chocolat) 0%, var(--chocolat-light) 100%);
            color: var(--creme);
            padding: 0.5rem 1.2rem;
            border-radius: 30px;
            font-size: 0.75rem;
            font-weight: 600;
            letter-spacing: 0.15em;
            text-transform: uppercase;
            margin-bottom: 1.5rem;
            animation: fadeInUp 1s ease-out 0.2s both;
        }
        
        .hero h1 {
            font-size: 4.5rem;
            line-height: 1.1;
            margin-bottom: 1.5rem;
            color: var(--chocolat-dark);
            animation: fadeInUp 1s ease-out 0.4s both;
        }
        
        .hero h1 .rose { color: var(--rose-dark); font-style: italic; }
        
        .hero-subtitle {
            font-size: 1.2rem;
            color: var(--text-light);
            margin-bottom: 2rem;
            max-width: 500px;
            animation: fadeInUp 1s ease-out 0.6s both;
        }
        
        .hero-cta {
            display: flex;
            gap: 1rem;
            animation: fadeInUp 1s ease-out 0.8s both;
        }
        
        .btn {
            display: inline-block;
            padding: 1rem 2rem;
            text-decoration: none;
            font-weight: 600;
            font-size: 0.85rem;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            border-radius: 50px;
            transition: all 0.4s ease;
            cursor: pointer;
            border: none;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--chocolat) 0%, var(--chocolat-light) 100%);
            color: var(--creme);
            box-shadow: 0 8px 25px rgba(92, 64, 51, 0.3);
        }
        
        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(92, 64, 51, 0.4);
        }
        
        .btn-secondary {
            background: transparent;
            color: var(--chocolat);
            border: 2px solid var(--chocolat);
        }
        
        .btn-secondary:hover {
            background: var(--chocolat);
            color: var(--creme);
        }
        
        .hero-image {
            position: relative;
            animation: fadeInRight 1s ease-out 0.5s both;
        }
        
        @keyframes fadeInRight {
            from { opacity: 0; transform: translateX(60px); }
            to { opacity: 1; transform: translateX(0); }
        }
        
        .hero-image img {
            width: 100%;
            border-radius: 20px;
            box-shadow: 0 30px 60px rgba(92, 64, 51, 0.2), 0 10px 20px rgba(92, 64, 51, 0.1);
        }
        
        .hero-image::before {
            content: '';
            position: absolute;
            top: -20px;
            right: -20px;
            width: 100%;
            height: 100%;
            border: 3px solid var(--rose);
            border-radius: 20px;
            z-index: -1;
        }
        
        .floating-badge {
            position: absolute;
            bottom: 30px;
            left: -30px;
            background: var(--blanc);
            padding: 1.5rem;
            border-radius: 15px;
            box-shadow: 0 15px 40px rgba(92, 64, 51, 0.15);
            animation: float 3s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        .floating-badge .icon { font-size: 2rem; margin-bottom: 0.5rem; }
        .floating-badge p { font-family: 'Cormorant Garamond', serif; font-size: 1.1rem; color: var(--chocolat); font-weight: 600; }
        .floating-badge span { font-size: 0.8rem; color: var(--text-light); }
        
        /* About Section */
        .about {
            padding: 8rem 8%;
            background: var(--blanc);
        }
        
        .section-header {
            text-align: center;
            margin-bottom: 4rem;
        }
        
        .section-label {
            display: inline-block;
            color: var(--rose-dark);
            font-size: 0.8rem;
            font-weight: 600;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            margin-bottom: 1rem;
        }
        
        .section-label::before, .section-label::after {
            content: 'âœ¦';
            margin: 0 0.8rem;
            color: var(--or);
        }
        
        .section-title {
            font-size: 3rem;
            color: var(--chocolat-dark);
            margin-bottom: 1rem;
        }
        
        .section-subtitle {
            font-size: 1.1rem;
            color: var(--text-light);
            max-width: 600px;
            margin: 0 auto;
        }
        
        .about-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 4rem;
            align-items: center;
        }
        
        .about-images {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }
        
        .about-images img {
            width: 100%;
            height: 250px;
            object-fit: cover;
            border-radius: 15px;
            transition: transform 0.5s ease;
        }
        
        .about-images img:hover { transform: scale(1.03); }
        .about-images img:first-child { grid-row: span 2; height: 100%; }
        
        .about-text h3 {
            font-size: 2.2rem;
            color: var(--chocolat-dark);
            margin-bottom: 1.5rem;
        }
        
        .about-text p {
            color: var(--text-light);
            margin-bottom: 1.5rem;
        }
        
        .about-features {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
            margin-top: 2rem;
        }
        
        .feature-item {
            display: flex;
            align-items: center;
            gap: 0.8rem;
        }
        
        .feature-icon {
            width: 45px;
            height: 45px;
            background: linear-gradient(135deg, var(--rose-light) 0%, var(--rose) 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            flex-shrink: 0;
        }
        
        .feature-text {
            font-size: 0.9rem;
            font-weight: 500;
            color: var(--chocolat);
        }
        
        /* Products Section */
        .products {
            padding: 8rem 8%;
            background: linear-gradient(180deg, var(--creme) 0%, var(--rose-light) 100%);
        }
        
        .products-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 2rem;
            margin-top: 3rem;
        }
        
        .product-card {
            background: var(--blanc);
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 10px 40px rgba(92, 64, 51, 0.1);
            transition: all 0.4s ease;
            position: relative;
        }
        
        .product-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 50px rgba(92, 64, 51, 0.2);
        }
        
        .product-card.clickable {
            cursor: pointer;
        }
        
        .product-card.clickable::after {
            content: 'ðŸ« Cliquez pour composer';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(135deg, var(--rose-dark) 0%, var(--rose) 100%);
            color: white;
            text-align: center;
            padding: 0.8rem;
            font-size: 0.8rem;
            font-weight: 600;
            letter-spacing: 0.05em;
            opacity: 0;
            transform: translateY(100%);
            transition: all 0.3s ease;
        }
        
        .product-card.clickable:hover::after {
            opacity: 1;
            transform: translateY(0);
        }
        
        .product-image {
            height: 280px;
            overflow: hidden;
            position: relative;
        }
        
        .product-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.6s ease;
        }
        
        .product-card:hover .product-image img {
            transform: scale(1.1);
        }
        
        .product-badge {
            position: absolute;
            top: 15px;
            left: 15px;
            background: var(--or);
            color: var(--chocolat-dark);
            padding: 0.4rem 0.8rem;
            border-radius: 20px;
            font-size: 0.7rem;
            font-weight: 600;
            letter-spacing: 0.1em;
            text-transform: uppercase;
        }
        
        .product-content { padding: 1.5rem; }
        .product-content h3 { font-size: 1.5rem; color: var(--chocolat-dark); margin-bottom: 0.5rem; }
        .product-content p { color: var(--text-light); font-size: 0.9rem; margin-bottom: 1rem; }
        
        .product-sizes {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }
        
        .size-tag {
            background: var(--rose-light);
            color: var(--chocolat);
            padding: 0.3rem 0.8rem;
            border-radius: 15px;
            font-size: 0.75rem;
            font-weight: 500;
        }
        
        /* Chocolate Selection Modal */
        .chocolate-modal {
            position: fixed;
            inset: 0;
            background: rgba(61, 43, 34, 0.9);
            backdrop-filter: blur(10px);
            z-index: 2000;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            transition: all 0.4s ease;
            padding: 2rem;
        }
        
        .chocolate-modal.active {
            opacity: 1;
            visibility: visible;
        }
        
        .modal-container {
            background: var(--creme);
            border-radius: 25px;
            max-width: 1100px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            transform: scale(0.9) translateY(30px);
            transition: transform 0.4s ease;
        }
        
        .chocolate-modal.active .modal-container {
            transform: scale(1) translateY(0);
        }
        
        .modal-header {
            background: linear-gradient(135deg, var(--chocolat-dark) 0%, var(--chocolat) 100%);
            padding: 2rem 2.5rem;
            border-radius: 25px 25px 0 0;
            position: sticky;
            top: 0;
            z-index: 10;
        }
        
        .modal-header h2 { color: var(--creme); font-size: 2rem; margin-bottom: 0.5rem; }
        .modal-header p { color: var(--rose-light); font-size: 0.95rem; }
        
        .modal-close {
            position: absolute;
            top: 1.5rem;
            right: 1.5rem;
            width: 45px;
            height: 45px;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            border-radius: 50%;
            color: var(--creme);
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .modal-close:hover {
            background: var(--rose);
            transform: rotate(90deg);
        }
        
        .modal-body { padding: 2rem 2.5rem; }
        
        /* Step System */
        .modal-step { display: none; }
        .modal-step.active { display: block; }
        
        .step-title {
            font-size: 1.5rem;
            color: var(--chocolat-dark);
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.8rem;
        }
        
        .step-description {
            color: var(--text-light);
            margin-bottom: 2rem;
            font-size: 0.95rem;
        }
        
        /* Ballotin Selection */
        .ballotin-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 1.5rem;
        }
        
        .ballotin-card {
            background: var(--blanc);
            border: 3px solid var(--rose-light);
            border-radius: 20px;
            padding: 2rem 1.5rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .ballotin-card:hover {
            border-color: var(--rose-dark);
            transform: translateY(-8px);
            box-shadow: 0 15px 40px rgba(196, 122, 122, 0.2);
        }
        
        .ballotin-card.selected {
            border-color: var(--rose-dark);
            background: var(--rose-light);
        }
        
        .ballotin-icon {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }
        
        .ballotin-weight {
            font-family: 'Cormorant Garamond', serif;
            font-size: 2rem;
            font-weight: 700;
            color: var(--chocolat-dark);
            margin-bottom: 0.3rem;
        }
        
        .ballotin-pieces {
            font-size: 0.9rem;
            color: var(--rose-dark);
            font-weight: 600;
        }
        
        /* Selected Ballotin Info */
        .selected-ballotin-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1.5rem;
            border-bottom: 2px solid var(--rose-light);
        }
        
        .back-btn {
            background: none;
            border: none;
            color: var(--text-light);
            font-size: 0.9rem;
            cursor: pointer;
            transition: color 0.3s ease;
            padding: 0.5rem 0;
        }
        
        .back-btn:hover {
            color: var(--rose-dark);
        }
        
        .ballotin-summary {
            display: flex;
            align-items: center;
            gap: 1.5rem;
        }
        
        .ballotin-chosen {
            background: var(--chocolat);
            color: white;
            padding: 0.5rem 1.2rem;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.9rem;
        }
        
        .pieces-remaining {
            color: var(--rose-dark);
            font-weight: 600;
        }
        
        /* Progress Bar */
        .progress-container {
            background: var(--rose-light);
            border-radius: 15px;
            height: 35px;
            margin-bottom: 2rem;
            position: relative;
            overflow: hidden;
        }
        
        .progress-bar {
            height: 100%;
            background: linear-gradient(135deg, var(--rose) 0%, var(--rose-dark) 100%);
            border-radius: 15px;
            width: 0%;
            transition: width 0.4s ease;
        }
        
        .progress-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-weight: 600;
            font-size: 0.85rem;
            color: var(--chocolat-dark);
        }
        
        .progress-container.complete .progress-bar {
            background: linear-gradient(135deg, var(--chocolat-light) 0%, var(--chocolat) 100%);
        }
        
        .progress-container.complete .progress-text {
            color: white;
        }
        
        .progress-container.over .progress-bar {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
        }
        
        /* Modal Steps Indicator */
        .modal-steps {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            margin-top: 1.5rem;
            padding-top: 1.5rem;
            border-top: 1px solid rgba(255,255,255,0.1);
        }
        
        .step-indicator {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.3rem;
            opacity: 0.4;
            transition: all 0.3s ease;
            padding: 0 1rem;
        }
        
        .step-indicator.active {
            opacity: 1;
        }
        
        .step-indicator.completed {
            opacity: 0.8;
        }
        
        .step-indicator.completed .step-number {
            background: #27ae60;
        }
        
        .step-number {
            width: 30px;
            height: 30px;
            background: rgba(255,255,255,0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.85rem;
            color: white;
        }
        
        .step-indicator.active .step-number {
            background: var(--rose);
        }
        
        .step-label {
            font-size: 0.7rem;
            color: var(--rose-light);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        
        /* Ballotin Price */
        .ballotin-price {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--rose-dark);
            margin-top: 0.5rem;
        }
        
        .ballotin-price-display {
            background: var(--rose-dark);
            color: white;
            padding: 0.4rem 1rem;
            border-radius: 20px;
            font-weight: 700;
        }
        
        /* Customer Form Styles */
        .customer-form {
            background: var(--blanc);
            padding: 2rem;
            border-radius: 15px;
            margin-bottom: 1.5rem;
        }
        
        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-bottom: 1rem;
        }
        
        .form-group {
            display: flex;
            flex-direction: column;
            gap: 0.4rem;
        }
        
        .form-group.full-width {
            grid-column: span 2;
        }
        
        .form-group label {
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--chocolat);
        }
        
        .form-group input,
        .form-group textarea {
            padding: 0.8rem 1rem;
            border: 2px solid var(--rose-light);
            border-radius: 10px;
            font-size: 1rem;
            font-family: inherit;
            transition: border-color 0.3s ease;
            outline: none;
        }
        
        .form-group input:focus,
        .form-group textarea:focus {
            border-color: var(--rose-dark);
        }
        
        .form-group input::placeholder,
        .form-group textarea::placeholder {
            color: #aaa;
        }
        
        .pickup-option {
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid var(--rose-light);
        }
        
        .checkbox-container {
            display: flex;
            align-items: center;
            gap: 0.8rem;
            cursor: pointer;
            font-size: 0.95rem;
            color: var(--chocolat);
        }
        
        .checkbox-container input {
            width: 20px;
            height: 20px;
            accent-color: var(--rose-dark);
        }
        
        /* Order Summary */
        .order-summary {
            background: linear-gradient(135deg, var(--chocolat-dark) 0%, var(--chocolat) 100%);
            padding: 1.5rem;
            border-radius: 15px;
            color: white;
        }
        
        .order-summary h4 {
            margin-bottom: 1rem;
            font-size: 1.1rem;
        }
        
        .summary-content {
            font-size: 0.9rem;
            line-height: 1.8;
            color: var(--rose-light);
            margin-bottom: 1rem;
            max-height: 150px;
            overflow-y: auto;
        }
        
        .summary-item {
            display: flex;
            justify-content: space-between;
            padding: 0.3rem 0;
        }
        
        .summary-total {
            display: flex;
            justify-content: space-between;
            padding-top: 1rem;
            border-top: 1px solid rgba(255,255,255,0.2);
            font-size: 1.2rem;
            font-weight: 700;
        }
        
        /* Payment Container */
        .payment-container {
            background: var(--blanc);
            padding: 2rem;
            border-radius: 15px;
        }
        
        .payment-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1.5rem;
            border-bottom: 2px solid var(--rose-light);
        }
        
        .secure-badge {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: #27ae60;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
        }
        
        .card-icons {
            display: flex;
            gap: 0.8rem;
        }
        
        .card-icon {
            background: var(--rose-light);
            padding: 0.4rem 0.8rem;
            border-radius: 8px;
            font-size: 0.8rem;
            font-weight: 500;
        }
        
        .stripe-element {
            padding: 1rem;
            border: 2px solid var(--rose-light);
            border-radius: 10px;
            background: white;
            transition: border-color 0.3s ease;
        }
        
        .stripe-element.StripeElement--focus {
            border-color: var(--rose-dark);
        }
        
        .card-errors {
            color: #e74c3c;
            font-size: 0.85rem;
            margin-top: 0.5rem;
            min-height: 20px;
        }
        
        .no-stripe-message {
            text-align: center;
            padding: 2rem;
            background: #fff3cd;
            border-radius: 10px;
            color: #856404;
        }
        
        .no-stripe-message p {
            margin: 0.5rem 0;
        }
        
        .payment-total {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 1.5rem;
            padding-top: 1.5rem;
            border-top: 2px solid var(--rose-light);
        }
        
        .total-amount {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--chocolat-dark);
        }
        
        /* Payment Processing */
        .btn-validate.processing {
            pointer-events: none;
            opacity: 0.7;
        }
        
        .btn-validate.processing::after {
            content: '';
            width: 16px;
            height: 16px;
            border: 2px solid white;
            border-top-color: transparent;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-left: 0.5rem;
            display: inline-block;
            vertical-align: middle;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Success Modal */
        .success-modal {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.9);
            z-index: 4000;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        
        .success-modal.active {
            opacity: 1;
            visibility: visible;
        }
        
        .success-content {
            background: var(--creme);
            padding: 3rem;
            border-radius: 25px;
            text-align: center;
            max-width: 500px;
            width: 90%;
            transform: scale(0.9);
            transition: transform 0.3s ease;
        }
        
        .success-modal.active .success-content {
            transform: scale(1);
        }
        
        .success-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
        }
        
        .success-content h2 {
            color: var(--chocolat-dark);
            margin-bottom: 1rem;
        }
        
        .success-content p {
            color: var(--text-light);
            margin-bottom: 0.5rem;
        }
        
        .order-number {
            background: var(--chocolat);
            color: white;
            padding: 0.8rem 1.5rem;
            border-radius: 10px;
            font-family: monospace;
            font-size: 1.2rem;
            margin: 1.5rem 0;
            display: inline-block;
        }
        
        .success-content .btn-primary {
            margin-top: 1rem;
        }
        
        @media (max-width: 768px) {
            .form-row {
                grid-template-columns: 1fr;
            }
            .form-group.full-width {
                grid-column: span 1;
            }
            .modal-steps {
                gap: 0.2rem;
            }
            .step-indicator {
                padding: 0 0.5rem;
            }
            .step-label {
                font-size: 0.6rem;
            }
            .payment-info {
                flex-direction: column;
                gap: 1rem;
            }
            .card-icons {
                flex-wrap: wrap;
                justify-content: center;
            }
        }
        
        .chocolate-category { margin-bottom: 2.5rem; }
        
        .category-title {
            font-size: 1.4rem;
            color: var(--chocolat-dark);
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--rose-light);
            display: flex;
            align-items: center;
            gap: 0.8rem;
        }
        
        .category-title span { font-size: 1.5rem; }
        
        .chocolates-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 1.5rem;
        }
        
        .chocolate-item {
            background: var(--blanc);
            border-radius: 15px;
            padding: 1.2rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 3px solid transparent;
            position: relative;
        }
        
        .chocolate-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(92, 64, 51, 0.15);
        }
        
        .chocolate-item.selected {
            border-color: var(--rose-dark);
            background: var(--rose-light);
        }
        
        .chocolate-item.selected::after {
            content: 'âœ“';
            position: absolute;
            top: -8px;
            right: -8px;
            width: 28px;
            height: 28px;
            background: var(--rose-dark);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
            font-weight: bold;
            animation: popIn 0.3s ease;
        }
        
        @keyframes popIn {
            0% { transform: scale(0); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }
        
        .chocolate-image {
            width: 100%;
            height: 80px;
            object-fit: contain;
            margin-bottom: 0.8rem;
            transition: transform 0.3s ease;
        }
        
        .chocolate-item:hover .chocolate-image { transform: scale(1.1); }
        
        .chocolate-name {
            font-size: 0.8rem;
            font-weight: 600;
            color: var(--chocolat);
            line-height: 1.3;
        }
        
        .quantity-control {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            margin-top: 0.8rem;
            opacity: 0;
            height: 0;
            overflow: hidden;
            transition: all 0.3s ease;
        }
        
        .chocolate-item.selected .quantity-control {
            opacity: 1;
            height: auto;
        }
        
        .qty-btn {
            width: 28px;
            height: 28px;
            border: none;
            border-radius: 50%;
            background: var(--chocolat);
            color: white;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .qty-btn:hover {
            background: var(--rose-dark);
            transform: scale(1.1);
        }
        
        .qty-value {
            font-weight: 700;
            color: var(--chocolat-dark);
            min-width: 30px;
            text-align: center;
        }
        
        .modal-footer {
            background: var(--blanc);
            padding: 1.5rem 2.5rem;
            border-top: 2px solid var(--rose-light);
            border-radius: 0 0 25px 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            bottom: 0;
        }
        
        .selection-summary {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .selection-count {
            background: linear-gradient(135deg, var(--rose) 0%, var(--rose-dark) 100%);
            color: white;
            padding: 0.6rem 1.2rem;
            border-radius: 25px;
            font-weight: 600;
            font-size: 0.9rem;
        }
        
        .selection-text { color: var(--text-light); font-size: 0.9rem; }
        
        .btn-validate {
            background: linear-gradient(135deg, var(--chocolat) 0%, var(--chocolat-light) 100%);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 30px;
            font-weight: 600;
            font-size: 0.9rem;
            letter-spacing: 0.05em;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-validate:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(92, 64, 51, 0.3);
        }
        
        .btn-reset {
            background: transparent;
            border: 2px solid var(--text-light);
            color: var(--text-light);
            padding: 0.8rem 1.5rem;
            border-radius: 30px;
            font-weight: 500;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-right: 1rem;
        }
        
        .btn-reset:hover {
            border-color: var(--rose-dark);
            color: var(--rose-dark);
        }
        
        /* Gallery Section */
        .gallery {
            padding: 8rem 8%;
            background: var(--blanc);
        }
        
        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            grid-template-rows: repeat(2, 250px);
            gap: 1.5rem;
            margin-top: 3rem;
        }
        
        .gallery-item {
            border-radius: 15px;
            overflow: hidden;
            position: relative;
            cursor: pointer;
        }
        
        .gallery-item:nth-child(1) {
            grid-column: span 2;
            grid-row: span 2;
        }
        
        .gallery-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.6s ease;
        }
        
        .gallery-item:hover img { transform: scale(1.1); }
        
        .gallery-overlay {
            position: absolute;
            inset: 0;
            background: linear-gradient(180deg, transparent 0%, rgba(61, 43, 34, 0.7) 100%);
            opacity: 0;
            transition: opacity 0.4s ease;
            display: flex;
            align-items: flex-end;
            padding: 1.5rem;
        }
        
        .gallery-item:hover .gallery-overlay { opacity: 1; }
        .gallery-overlay span { color: var(--blanc); font-family: 'Cormorant Garamond', serif; font-size: 1.3rem; }
        
        /* Contact Section */
        .contact {
            padding: 8rem 8%;
            background: linear-gradient(135deg, var(--chocolat-dark) 0%, var(--chocolat) 100%);
            color: var(--creme);
            position: relative;
            overflow: hidden;
        }
        
        .contact::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(circle at 10% 90%, rgba(232, 164, 164, 0.1) 0%, transparent 40%),
                radial-gradient(circle at 90% 10%, rgba(201, 168, 108, 0.1) 0%, transparent 40%);
            pointer-events: none;
        }
        
        .contact .section-label { color: var(--rose); }
        .contact .section-title { color: var(--creme); }
        .contact .section-subtitle { color: var(--rose-light); }
        
        .contact-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 4rem;
            margin-top: 3rem;
            position: relative;
            z-index: 2;
        }
        
        .contact-info h3 { font-size: 2rem; margin-bottom: 2rem; color: var(--creme); }
        
        .contact-item {
            display: flex;
            align-items: flex-start;
            gap: 1rem;
            margin-bottom: 1.5rem;
            padding: 1.5rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }
        
        .contact-item:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(10px);
        }
        
        .contact-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, var(--rose) 0%, var(--rose-dark) 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3rem;
            flex-shrink: 0;
        }
        
        .contact-details h4 { font-size: 1.1rem; margin-bottom: 0.3rem; color: var(--creme); }
        .contact-details p { color: var(--rose-light); font-size: 0.95rem; }
        .contact-details a { color: var(--rose-light); text-decoration: none; transition: color 0.3s ease; }
        .contact-details a:hover { color: var(--rose); }
        
        .contact-map {
            border-radius: 20px;
            overflow: hidden;
            height: 400px;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3);
        }
        
        .contact-map iframe { width: 100%; height: 100%; border: none; }
        
        /* Footer */
        .footer {
            background: var(--chocolat-dark);
            padding: 3rem 8%;
            text-align: center;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .footer-logo { font-family: 'Cormorant Garamond', serif; font-size: 2rem; color: var(--creme); margin-bottom: 1rem; }
        .footer-logo span { color: var(--rose); }
        .footer p { color: var(--text-light); font-size: 0.9rem; }
        
        .social-links {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin: 1.5rem 0;
        }
        
        .social-links a {
            width: 45px;
            height: 45px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--creme);
            text-decoration: none;
            font-size: 1.2rem;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .social-links a:hover {
            background: var(--rose);
            transform: translateY(-5px);
        }
        
        /* Scroll animations */
        .reveal {
            opacity: 0;
            transform: translateY(50px);
            transition: all 0.8s ease;
        }
        
        .reveal.active {
            opacity: 1;
            transform: translateY(0);
        }
        
        /* Mobile Responsive */
        @media (max-width: 1024px) {
            .hero-content { grid-template-columns: 1fr; text-align: center; padding: 10rem 5% 5rem; }
            .hero h1 { font-size: 3.5rem; }
            .hero-subtitle { margin: 0 auto 2rem; }
            .hero-cta { justify-content: center; }
            .hero-image { max-width: 600px; margin: 0 auto; }
            .about-content, .contact-content { grid-template-columns: 1fr; }
            .products-grid { grid-template-columns: repeat(2, 1fr); }
            .gallery-grid { grid-template-columns: repeat(2, 1fr); grid-template-rows: repeat(3, 200px); }
            .gallery-item:nth-child(1) { grid-column: span 2; }
            .chocolates-grid { grid-template-columns: repeat(3, 1fr); }
            .ballotin-grid { grid-template-columns: repeat(3, 1fr); }
        }
        
        @media (max-width: 768px) {
            .nav-links {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100vh;
                background: var(--creme);
                flex-direction: column;
                align-items: center;
                justify-content: center;
                gap: 2rem;
                transform: translateX(-100%);
                transition: transform 0.4s ease;
            }
            .nav-links.active { transform: translateX(0); }
            .menu-toggle { display: flex; }
            .menu-toggle.active span:nth-child(1) { transform: rotate(45deg) translate(5px, 5px); }
            .menu-toggle.active span:nth-child(2) { opacity: 0; }
            .menu-toggle.active span:nth-child(3) { transform: rotate(-45deg) translate(5px, -5px); }
            .hero h1 { font-size: 2.5rem; }
            .section-title { font-size: 2.2rem; }
            .products-grid { grid-template-columns: 1fr; }
            .gallery-grid { grid-template-columns: 1fr; grid-template-rows: repeat(6, 200px); }
            .gallery-item:nth-child(1) { grid-column: span 1; grid-row: span 1; }
            .about-images { grid-template-columns: 1fr; }
            .about-images img:first-child { grid-row: span 1; height: 250px; }
            .about-features { grid-template-columns: 1fr; }
            .floating-badge { display: none; }
            .chocolates-grid { grid-template-columns: repeat(2, 1fr); gap: 1rem; }
            .ballotin-grid { grid-template-columns: repeat(2, 1fr); gap: 1rem; }
            .ballotin-card { padding: 1.5rem 1rem; }
            .ballotin-weight { font-size: 1.5rem; }
            .selected-ballotin-info { flex-direction: column; gap: 1rem; align-items: flex-start; }
            .ballotin-summary { flex-direction: column; align-items: flex-start; gap: 0.5rem; }
            .modal-footer { flex-direction: column; gap: 1rem; }
            .modal-body { padding: 1.5rem; }
            .modal-header { padding: 1.5rem; }
        }
        
        /* Lightbox */
        .lightbox {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.95);
            z-index: 2000;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            transition: all 0.4s ease;
        }
        
        .lightbox.active { opacity: 1; visibility: visible; }
        .lightbox img { max-width: 90%; max-height: 90vh; border-radius: 10px; transform: scale(0.9); transition: transform 0.4s ease; }
        .lightbox.active img { transform: scale(1); }
        .lightbox-close { position: absolute; top: 20px; right: 30px; color: white; font-size: 3rem; cursor: pointer; transition: color 0.3s ease; }
        .lightbox-close:hover { color: var(--rose); }
        
        /* Toast notification */
        .toast {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: var(--chocolat-dark);
            color: white;
            padding: 1rem 2rem;
            border-radius: 50px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            z-index: 3000;
            opacity: 0;
            transition: all 0.4s ease;
        }
        
        .toast.show {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
        }
        
        /* Admin Styles */
        .admin-link {
            margin-top: 1.5rem;
            font-size: 0.75rem;
            color: rgba(255,255,255,0.3);
            cursor: pointer;
            transition: color 0.3s ease;
        }
        
        .admin-link:hover {
            color: var(--rose);
        }
        
        /* Admin Login Modal */
        .admin-login-modal {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.8);
            backdrop-filter: blur(10px);
            z-index: 3000;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        
        .admin-login-modal.active {
            opacity: 1;
            visibility: visible;
        }
        
        .admin-login-container {
            background: var(--creme);
            padding: 3rem;
            border-radius: 20px;
            text-align: center;
            max-width: 400px;
            width: 90%;
            transform: scale(0.9);
            transition: transform 0.3s ease;
        }
        
        .admin-login-modal.active .admin-login-container {
            transform: scale(1);
        }
        
        .admin-login-container h2 {
            color: var(--chocolat-dark);
            margin-bottom: 0.5rem;
            font-size: 1.8rem;
        }
        
        .admin-login-container > p {
            color: var(--text-light);
            margin-bottom: 1.5rem;
        }
        
        .admin-login-container input {
            width: 100%;
            padding: 1rem;
            border: 2px solid var(--rose-light);
            border-radius: 10px;
            font-size: 1rem;
            margin-bottom: 1.5rem;
            outline: none;
            transition: border-color 0.3s ease;
        }
        
        .admin-login-container input:focus {
            border-color: var(--rose-dark);
        }
        
        .admin-login-buttons {
            display: flex;
            gap: 1rem;
        }
        
        .btn-cancel, .btn-login {
            flex: 1;
            padding: 1rem;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-cancel {
            background: var(--rose-light);
            color: var(--chocolat);
        }
        
        .btn-cancel:hover {
            background: var(--rose);
        }
        
        .btn-login {
            background: var(--chocolat);
            color: white;
        }
        
        .btn-login:hover {
            background: var(--chocolat-dark);
        }
        
        .login-error {
            color: #e74c3c;
            margin-top: 1rem;
            font-size: 0.9rem;
        }
        
        /* Admin Panel */
        .admin-panel {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.9);
            z-index: 3000;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            padding: 1rem;
        }
        
        .admin-panel.active {
            opacity: 1;
            visibility: visible;
        }
        
        .admin-panel-container {
            background: var(--creme);
            border-radius: 20px;
            max-width: 1000px;
            width: 100%;
            max-height: 90vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            transform: scale(0.9);
            transition: transform 0.3s ease;
        }
        
        .admin-panel.active .admin-panel-container {
            transform: scale(1);
        }
        
        .admin-header {
            background: linear-gradient(135deg, var(--chocolat-dark) 0%, var(--chocolat) 100%);
            padding: 1.5rem 2rem;
            position: relative;
        }
        
        .admin-header h2 {
            color: white;
            font-size: 1.5rem;
            margin-bottom: 0.3rem;
        }
        
        .admin-header p {
            color: var(--rose-light);
            font-size: 0.9rem;
        }
        
        .admin-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            width: 40px;
            height: 40px;
            background: rgba(255,255,255,0.1);
            border: none;
            border-radius: 50%;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .admin-close:hover {
            background: var(--rose);
            transform: rotate(90deg);
        }
        
        .admin-body {
            padding: 2rem;
            overflow-y: auto;
            flex: 1;
        }
        
        .admin-section {
            margin-bottom: 2.5rem;
            padding-bottom: 2rem;
            border-bottom: 2px solid var(--rose-light);
        }
        
        .admin-section:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }
        
        .admin-section h3 {
            color: var(--chocolat-dark);
            font-size: 1.3rem;
            margin-bottom: 1.5rem;
        }
        
        .image-manager {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
        }
        
        .image-label {
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--chocolat);
            margin-bottom: 0.5rem;
        }
        
        .current-image {
            width: 100%;
            max-width: 400px;
            height: 200px;
            border-radius: 15px;
            overflow: hidden;
            border: 3px solid var(--rose-light);
            background: var(--blanc);
        }
        
        .current-image.small {
            max-width: 200px;
            height: 120px;
        }
        
        .current-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .image-controls {
            display: flex;
            gap: 0.8rem;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .upload-btn {
            background: linear-gradient(135deg, var(--rose) 0%, var(--rose-dark) 100%);
            color: white;
            padding: 0.8rem 1.5rem;
            border-radius: 25px;
            font-size: 0.85rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-block;
        }
        
        .upload-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(196, 122, 122, 0.4);
        }
        
        .upload-btn input {
            display: none;
        }
        
        .upload-btn.small, .reset-btn.small {
            padding: 0.5rem 1rem;
            font-size: 0.75rem;
        }
        
        .reset-btn {
            background: var(--blanc);
            color: var(--chocolat);
            border: 2px solid var(--chocolat);
            padding: 0.8rem 1.5rem;
            border-radius: 25px;
            font-size: 0.85rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .reset-btn:hover {
            background: var(--chocolat);
            color: white;
        }
        
        .image-grid-admin {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 2rem;
        }
        
        .admin-footer {
            padding: 1.5rem 2rem;
            background: var(--blanc);
            border-top: 2px solid var(--rose-light);
            display: flex;
            justify-content: space-between;
            gap: 1rem;
            flex-wrap: wrap;
        }
        
        .btn-reset-all {
            background: transparent;
            border: 2px solid #e74c3c;
            color: #e74c3c;
            padding: 0.8rem 1.5rem;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-reset-all:hover {
            background: #e74c3c;
            color: white;
        }
        
        .btn-save {
            background: linear-gradient(135deg, var(--chocolat) 0%, var(--chocolat-light) 100%);
            color: white;
            border: none;
            padding: 0.8rem 2rem;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-save:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(92, 64, 51, 0.4);
        }
        
        @media (max-width: 768px) {
            .admin-body { padding: 1rem; }
            .admin-header { padding: 1rem; }
            .admin-footer { 
                flex-direction: column;
                padding: 1rem;
            }
            .image-grid-admin {
                grid-template-columns: repeat(2, 1fr);
                gap: 1rem;
            }
            .current-image.small {
                max-width: 100%;
                height: 100px;
            }
        }
        
        /* Payment Config Styles */
        .admin-description {
            color: var(--text-light);
            font-size: 0.9rem;
            margin-bottom: 1.5rem;
        }
        
        .payment-config {
            background: var(--blanc);
            border-radius: 15px;
            padding: 1.5rem;
        }
        
        .config-status {
            display: flex;
            align-items: center;
            gap: 0.8rem;
            padding: 1rem;
            background: var(--rose-light);
            border-radius: 10px;
            margin-bottom: 1.5rem;
        }
        
        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #e74c3c;
        }
        
        .status-indicator.active {
            background: #27ae60;
        }
        
        .config-form {
            margin-bottom: 2rem;
        }
        
        .config-form .form-group {
            margin-bottom: 1rem;
        }
        
        .config-form small {
            color: var(--text-light);
            font-size: 0.8rem;
        }
        
        .config-form small a {
            color: var(--rose-dark);
        }
        
        .config-info {
            background: #e8f4fd;
            padding: 1rem;
            border-radius: 10px;
            margin: 1.5rem 0;
            border-left: 4px solid #3498db;
        }
        
        .config-info h4 {
            color: #2980b9;
            margin-bottom: 0.8rem;
            font-size: 1rem;
        }
        
        .config-info ol {
            margin-left: 1.2rem;
            color: var(--text-dark);
            font-size: 0.9rem;
        }
        
        .config-info ol li {
            margin-bottom: 0.3rem;
        }
        
        .config-info a {
            color: #2980b9;
        }
        
        .config-actions {
            display: flex;
            gap: 1rem;
            margin-top: 1.5rem;
        }
        
        .btn-test-stripe, .btn-save-stripe, .btn-save-prices, .btn-export-orders {
            padding: 0.8rem 1.5rem;
            border: none;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-test-stripe {
            background: var(--rose-light);
            color: var(--chocolat);
        }
        
        .btn-test-stripe:hover {
            background: var(--rose);
        }
        
        .btn-save-stripe, .btn-save-prices {
            background: linear-gradient(135deg, var(--chocolat) 0%, var(--chocolat-light) 100%);
            color: white;
        }
        
        .btn-save-stripe:hover, .btn-save-prices:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(92, 64, 51, 0.3);
        }
        
        .test-result {
            margin-top: 1rem;
            padding: 1rem;
            border-radius: 10px;
            display: none;
        }
        
        .test-result.success {
            display: block;
            background: #d4edda;
            color: #155724;
        }
        
        .test-result.error {
            display: block;
            background: #f8d7da;
            color: #721c24;
        }
        
        .pricing-config {
            border-top: 2px solid var(--rose-light);
            padding-top: 1.5rem;
            margin-top: 1.5rem;
        }
        
        .pricing-config h4 {
            color: var(--chocolat-dark);
            margin-bottom: 1rem;
        }
        
        .price-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin-bottom: 1rem;
        }
        
        .price-item {
            display: flex;
            flex-direction: column;
            gap: 0.3rem;
        }
        
        .price-item label {
            font-size: 0.85rem;
            color: var(--chocolat);
            font-weight: 500;
        }
        
        .price-item input {
            width: 80px;
            padding: 0.5rem;
            border: 2px solid var(--rose-light);
            border-radius: 8px;
            font-size: 1rem;
            text-align: right;
        }
        
        .orders-section {
            border-top: 2px solid var(--rose-light);
            padding-top: 1.5rem;
            margin-top: 1.5rem;
        }
        
        .orders-section h4 {
            color: var(--chocolat-dark);
            margin-bottom: 1rem;
        }
        
        .orders-list {
            max-height: 300px;
            overflow-y: auto;
            margin-bottom: 1rem;
        }
        
        .no-orders {
            color: var(--text-light);
            font-style: italic;
            text-align: center;
            padding: 2rem;
        }
        
        .order-item {
            background: var(--rose-light);
            padding: 1rem;
            border-radius: 10px;
            margin-bottom: 0.8rem;
        }
        
        .order-item-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }
        
        .order-id {
            font-family: monospace;
            font-weight: 700;
            color: var(--chocolat);
        }
        
        .order-date {
            font-size: 0.8rem;
            color: var(--text-light);
        }
        
        .order-customer {
            font-size: 0.9rem;
            color: var(--chocolat-dark);
        }
        
        .order-total {
            font-weight: 700;
            color: var(--rose-dark);
        }
        
        .btn-export-orders {
            background: var(--blanc);
            border: 2px solid var(--chocolat);
            color: var(--chocolat);
        }
        
        .btn-export-orders:hover {
            background: var(--chocolat);
            color: white;
        }
        
        /* WhatsApp Floating Button */
        .whatsapp-float {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            background: #25D366;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 5px 25px rgba(37, 211, 102, 0.4);
            z-index: 1000;
            transition: all 0.3s ease;
            animation: pulse-whatsapp 2s infinite;
        }
        
        .whatsapp-float:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 35px rgba(37, 211, 102, 0.5);
        }
        
        .whatsapp-float svg {
            width: 32px;
            height: 32px;
            color: white;
        }
        
        @keyframes pulse-whatsapp {
            0%, 100% { box-shadow: 0 5px 25px rgba(37, 211, 102, 0.4); }
            50% { box-shadow: 0 5px 35px rgba(37, 211, 102, 0.6); }
        }
        
        /* Legal Links in Footer */
        .legal-links {
            display: flex;
            gap: 1.5rem;
            justify-content: center;
            margin: 1rem 0;
            flex-wrap: wrap;
        }
        
        .legal-links a {
            color: rgba(255,255,255,0.6);
            font-size: 0.85rem;
            text-decoration: none;
            transition: color 0.3s ease;
        }
        
        .legal-links a:hover {
            color: var(--rose);
        }
        
        /* Cookie Banner */
        .cookie-banner {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--chocolat-dark);
            padding: 1rem 2rem;
            z-index: 2500;
            transform: translateY(100%);
            transition: transform 0.4s ease;
        }
        
        .cookie-banner.show {
            transform: translateY(0);
        }
        
        .cookie-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 2rem;
            flex-wrap: wrap;
        }
        
        .cookie-content p {
            color: white;
            font-size: 0.9rem;
            margin: 0;
            flex: 1;
        }
        
        .cookie-content a {
            color: var(--rose);
        }
        
        .cookie-buttons {
            display: flex;
            gap: 0.8rem;
        }
        
        .cookie-btn {
            padding: 0.6rem 1.5rem;
            border-radius: 25px;
            font-weight: 600;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
        }
        
        .cookie-btn.accept {
            background: var(--rose);
            color: white;
        }
        
        .cookie-btn.accept:hover {
            background: var(--rose-dark);
        }
        
        .cookie-btn.decline {
            background: transparent;
            border: 2px solid rgba(255,255,255,0.3);
            color: white;
        }
        
        .cookie-btn.decline:hover {
            border-color: white;
        }
        
        /* Legal Modal */
        .legal-modal {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.8);
            z-index: 3000;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            padding: 1rem;
        }
        
        .legal-modal.active {
            opacity: 1;
            visibility: visible;
        }
        
        .legal-modal-container {
            background: var(--creme);
            border-radius: 20px;
            max-width: 800px;
            width: 100%;
            max-height: 85vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }
        
        .legal-modal-header {
            background: var(--chocolat);
            padding: 1.5rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .legal-modal-header h2 {
            color: white;
            margin: 0;
            font-size: 1.5rem;
        }
        
        .legal-modal-body {
            padding: 2rem;
            overflow-y: auto;
            line-height: 1.8;
            color: var(--text-dark);
        }
        
        .legal-modal-body h3 {
            color: var(--chocolat-dark);
            margin-top: 1.5rem;
            margin-bottom: 0.8rem;
        }
        
        .legal-modal-body p {
            margin-bottom: 1rem;
        }
        
        .legal-modal-body ul {
            margin-left: 1.5rem;
            margin-bottom: 1rem;
        }
        
        .legal-modal-body li {
            margin-bottom: 0.5rem;
        }
        
        /* Delivery Options */
        .delivery-options {
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid var(--rose-light);
        }
        
        .delivery-options h4 {
            margin-bottom: 0.8rem;
            color: var(--chocolat);
            font-size: 0.95rem;
        }
        
        .delivery-option {
            display: flex;
            align-items: center;
            gap: 0.8rem;
            padding: 0.8rem;
            background: var(--blanc);
            border: 2px solid var(--rose-light);
            border-radius: 10px;
            margin-bottom: 0.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .delivery-option:hover {
            border-color: var(--rose);
        }
        
        .delivery-option.selected {
            border-color: var(--chocolat);
            background: var(--rose-light);
        }
        
        .delivery-option input {
            accent-color: var(--chocolat);
        }
        
        .delivery-details {
            flex: 1;
        }
        
        .delivery-name {
            font-weight: 600;
            color: var(--chocolat-dark);
        }
        
        .delivery-desc {
            font-size: 0.8rem;
            color: var(--text-light);
        }
        
        .delivery-price {
            font-weight: 700;
            color: var(--rose-dark);
        }
        
        /* Cart Multi-items */
        .cart-items {
            max-height: 200px;
            overflow-y: auto;
            margin-bottom: 1rem;
        }
        
        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.8rem;
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
            margin-bottom: 0.5rem;
        }
        
        .cart-item-info {
            flex: 1;
        }
        
        .cart-item-name {
            font-weight: 600;
        }
        
        .cart-item-details {
            font-size: 0.8rem;
            opacity: 0.8;
        }
        
        .cart-item-price {
            font-weight: 700;
        }
        
        .cart-item-remove {
            background: none;
            border: none;
            color: #e74c3c;
            cursor: pointer;
            font-size: 1.2rem;
            padding: 0.3rem;
            margin-left: 0.5rem;
        }
        
        /* Surprise Button */
        .surprise-btn {
            display: block;
            width: 100%;
            padding: 1rem;
            background: linear-gradient(135deg, #9b59b6 0%, #8e44ad 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            margin-top: 1rem;
            transition: all 0.3s ease;
        }
        
        .surprise-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(155, 89, 182, 0.4);
        }
        
        /* Chocolate Info Tooltip */
        .chocolate-item {
            position: relative;
        }
        
        .chocolate-info-btn {
            position: absolute;
            top: 5px;
            right: 5px;
            width: 20px;
            height: 20px;
            background: var(--chocolat);
            color: white;
            border: none;
            border-radius: 50%;
            font-size: 0.7rem;
            cursor: pointer;
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 10;
        }
        
        .chocolate-item:hover .chocolate-info-btn {
            opacity: 1;
        }
        
        .chocolate-tooltip {
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: var(--chocolat-dark);
            color: white;
            padding: 0.8rem;
            border-radius: 10px;
            font-size: 0.75rem;
            width: 200px;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            z-index: 100;
            text-align: left;
            pointer-events: none;
        }
        
        .chocolate-tooltip.show {
            opacity: 1;
            visibility: visible;
        }
        
        .chocolate-tooltip::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            border: 8px solid transparent;
            border-top-color: var(--chocolat-dark);
        }
        
        .allergen-tag {
            display: inline-block;
            background: rgba(255,255,255,0.2);
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            margin: 0.2rem;
            font-size: 0.65rem;
        }
        
        /* Admin Stats Dashboard */
        .admin-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin-bottom: 1.5rem;
        }
        
        .stat-card {
            background: linear-gradient(135deg, var(--rose) 0%, var(--rose-dark) 100%);
            padding: 1.2rem;
            border-radius: 15px;
            text-align: center;
            color: white;
        }
        
        .stat-card.chocolate {
            background: linear-gradient(135deg, var(--chocolat) 0%, var(--chocolat-dark) 100%);
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            display: block;
        }
        
        .stat-label {
            font-size: 0.8rem;
            opacity: 0.9;
        }
        
        /* Feature Toggles */
        .feature-toggles {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        
        .feature-toggle {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 1.2rem;
            background: var(--blanc);
            border-radius: 12px;
            border: 2px solid var(--rose-light);
        }
        
        .feature-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .feature-icon {
            font-size: 1.5rem;
        }
        
        .feature-details {
            display: flex;
            flex-direction: column;
        }
        
        .feature-name {
            font-weight: 600;
            color: var(--chocolat-dark);
        }
        
        .feature-desc {
            font-size: 0.8rem;
            color: var(--text-light);
        }
        
        .toggle-switch {
            position: relative;
            width: 50px;
            height: 26px;
            flex-shrink: 0;
        }
        
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .toggle-slider {
            position: absolute;
            cursor: pointer;
            inset: 0;
            background-color: #ccc;
            transition: 0.3s;
            border-radius: 26px;
        }
        
        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 20px;
            width: 20px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: 0.3s;
            border-radius: 50%;
        }
        
        .toggle-switch input:checked + .toggle-slider {
            background-color: #27ae60;
        }
        
        .toggle-switch input:checked + .toggle-slider:before {
            transform: translateX(24px);
        }
        
        /* Disabled states for features */
        .whatsapp-float.hidden {
            display: none !important;
        }
        
        .phone-disabled {
            opacity: 0.5;
            pointer-events: none;
        }
        
        /* Share Section */
        .share-section {
            margin: 1.5rem 0;
            padding: 1rem 0;
            border-top: 1px solid rgba(255,255,255,0.1);
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        
        .share-title {
            font-size: 0.9rem;
            color: rgba(255,255,255,0.7);
            margin-bottom: 0.8rem;
        }
        
        .share-buttons {
            display: flex;
            justify-content: center;
            gap: 1rem;
            flex-wrap: wrap;
        }
        
        .share-btn {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.6rem 1.2rem;
            border-radius: 25px;
            font-size: 0.85rem;
            font-weight: 600;
            text-decoration: none;
            transition: all 0.3s ease;
        }
        
        .share-btn svg {
            width: 18px;
            height: 18px;
        }
        
        .share-btn.facebook {
            background: #1877f2;
            color: white;
        }
        
        .share-btn.facebook:hover {
            background: #166fe5;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(24, 119, 242, 0.4);
        }
        
        .share-btn.instagram {
            background: linear-gradient(45deg, #f09433 0%, #e6683c 25%, #dc2743 50%, #cc2366 75%, #bc1888 100%);
            color: white;
        }
        
        .share-btn.instagram:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(225, 48, 108, 0.4);
        }
        
        /* Ballotin disabled - hide completely */
        .ballotin-disabled .product-card:first-child {
            display: none !important;
        }
        
        @media (max-width: 768px) {
            .whatsapp-float {
                bottom: 20px;
                right: 20px;
                width: 50px;
                height: 50px;
            }
            .whatsapp-float svg {
                width: 26px;
                height: 26px;
            }
            .cookie-content {
                flex-direction: column;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <a href="#" class="nav-logo">Chez <span>Rose</span></a>
        <ul class="nav-links">
            <li><a href="#accueil">Accueil</a></li>
            <li><a href="#boutique">La Boutique</a></li>
            <li><a href="#produits">Nos Produits</a></li>
            <li><a href="#galerie">Galerie</a></li>
            <li><a href="#contact">Contact</a></li>
        </ul>
        <div class="menu-toggle">
            <span></span>
            <span></span>
            <span></span>
        </div>
    </nav>
    
    <!-- Hero Section -->
    <section class="hero" id="accueil">
        <div class="hero-bg-pattern"></div>
        <div class="hero-content">
            <div class="hero-text">
                <span class="hero-badge">âœ¦ Chocolaterie Artisanale âœ¦</span>
                <h1>Chez <span class="rose">Rose</span></h1>
                <p class="hero-subtitle">DÃ©couvrez l'art du chocolat artisanal dans notre boutique de Puttelange-aux-Lacs. Des crÃ©ations uniques, faites avec passion et savoir-faire.</p>
                <div class="hero-cta">
                    <a href="#produits" class="btn btn-primary">Nos CrÃ©ations</a>
                    <a href="#contact" class="btn btn-secondary">Nous Trouver</a>
                </div>
            </div>
            <div class="hero-image">
                <img src="images/boutique-main.png" alt="Boutique Chez Rose Chocolaterie">
                <div class="floating-badge">
                    <div class="icon">ðŸ«</div>
                    <p>100% Artisanal</p>
                    <span>Fait maison</span>
                </div>
            </div>
        </div>
    </section>
    
    <!-- About Section -->
    <section class="about" id="boutique">
        <div class="section-header reveal">
            <span class="section-label">Notre Histoire</span>
            <h2 class="section-title">La Boutique Chez Rose</h2>
            <p class="section-subtitle">Un univers gourmand oÃ¹ le chocolat est roi</p>
        </div>
        <div class="about-content">
            <div class="about-images reveal">
                <img src="images/logo-wall.jpeg" alt="IntÃ©rieur boutique Chez Rose">
                <img src="images/vitrine-new.png" alt="Vitrine chocolats">
                <img src="images/chocolats-display.png" alt="Assortiment de chocolats">
            </div>
            <div class="about-text reveal">
                <h3>L'Excellence du Chocolat Artisanal</h3>
                <p>Bienvenue dans notre chocolaterie artisanale, oÃ¹ chaque crÃ©ation est le fruit d'un savoir-faire passionnÃ©. Chez Rose, nous sÃ©lectionnons les meilleurs cacaos et ingrÃ©dients pour vous offrir des chocolats d'exception.</p>
                <p>Notre boutique vous propose une large gamme de gourmandises : des ballotins garnis de nos meilleures crÃ©ations, des dragÃ©es de la prestigieuse Maison Avola, et des moulages pour toutes les occasions.</p>
                <div class="about-features">
                    <div class="feature-item">
                        <div class="feature-icon">ðŸŽ</div>
                        <span class="feature-text">Coffrets cadeaux personnalisÃ©s</span>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">ðŸŒ¿</div>
                        <span class="feature-text">IngrÃ©dients de qualitÃ©</span>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">ðŸ‘©â€ðŸ³</div>
                        <span class="feature-text">Fabrication artisanale</span>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">ðŸ’</div>
                        <span class="feature-text">CrÃ©ations originales</span>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Products Section -->
    <section class="products" id="produits">
        <div class="section-header reveal">
            <span class="section-label">Nos SpÃ©cialitÃ©s</span>
            <h2 class="section-title">DÃ©couvrez Nos Produits</h2>
            <p class="section-subtitle">Des crÃ©ations gourmandes pour tous les goÃ»ts</p>
        </div>
        <div class="products-grid">
            <div class="product-card clickable reveal" onclick="openChocolateModal()">
                <div class="product-image">
                    <img src="images/bonbons2.jpeg" alt="Ballotins de chocolats">
                    <span class="product-badge">Best-seller</span>
                </div>
                <div class="product-content">
                    <h3>Nos Ballotins</h3>
                    <p>Assortiments raffinÃ©s de nos meilleurs chocolats, parfaits pour offrir ou se faire plaisir.</p>
                    <div class="product-sizes">
                        <span class="size-tag">250g</span>
                        <span class="size-tag">375g</span>
                        <span class="size-tag">500g</span>
                        <span class="size-tag">750g</span>
                        <span class="size-tag">1kg</span>
                    </div>
                </div>
            </div>
            <div class="product-card reveal">
                <div class="product-image">
                    <img src="images/dragees.jpeg" alt="DragÃ©es Avola">
                    <span class="product-badge">Prestige</span>
                </div>
                <div class="product-content">
                    <h3>DragÃ©es Avola</h3>
                    <p>Les authentiques dragÃ©es de la Maison Avola, idÃ©ales pour vos Ã©vÃ©nements : baptÃªmes, mariages, communions.</p>
                    <div class="product-sizes">
                        <span class="size-tag">Gamme complÃ¨te</span>
                        <span class="size-tag">Sur mesure</span>
                    </div>
                </div>
            </div>
            <div class="product-card reveal">
                <div class="product-image">
                    <img src="images/noel.jpeg" alt="Moulages chocolat">
                    <span class="product-badge">Artisanal</span>
                </div>
                <div class="product-content">
                    <h3>Moulages & Figurines</h3>
                    <p>Des crÃ©ations uniques en chocolat pour NoÃ«l, PÃ¢ques et toutes les occasions festives.</p>
                    <div class="product-sizes">
                        <span class="size-tag">Saisonniers</span>
                        <span class="size-tag">Sur commande</span>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Chocolate Selection Modal -->
    <div class="chocolate-modal" id="chocolateModal">
        <div class="modal-container">
            <div class="modal-header">
                <h2>Composez Votre Ballotin</h2>
                <p id="modalSubtitle">Choisissez la taille de votre ballotin</p>
                <button class="modal-close" onclick="closeChocolateModal()">Ã—</button>
                
                <!-- Progress Steps -->
                <div class="modal-steps">
                    <div class="step-indicator active" data-step="1">
                        <span class="step-number">1</span>
                        <span class="step-label">Ballotin</span>
                    </div>
                    <div class="step-indicator" data-step="2">
                        <span class="step-number">2</span>
                        <span class="step-label">Chocolats</span>
                    </div>
                    <div class="step-indicator" data-step="3">
                        <span class="step-number">3</span>
                        <span class="step-label">CoordonnÃ©es</span>
                    </div>
                    <div class="step-indicator" data-step="4">
                        <span class="step-number">4</span>
                        <span class="step-label">Paiement</span>
                    </div>
                </div>
            </div>
            <div class="modal-body">
                <!-- Step 1: Choose Ballotin Size -->
                <div id="step1" class="modal-step active">
                    <div class="ballotin-selection">
                        <h3 class="step-title"><span>ðŸ“¦</span> Ã‰tape 1 : Choisissez votre ballotin</h3>
                        <p class="step-description">Chaque sujet pÃ¨se 10g. SÃ©lectionnez la taille qui vous convient.</p>
                        <div class="ballotin-grid">
                            <div class="ballotin-card" onclick="selectBallotin(250, 25, 12.50)">
                                <div class="ballotin-weight">250g</div>
                                <div class="ballotin-pieces">25 sujets</div>
                                <div class="ballotin-price">12,50 â‚¬</div>
                                <div class="ballotin-icon">ðŸŽ</div>
                            </div>
                            <div class="ballotin-card" onclick="selectBallotin(375, 37, 18.75)">
                                <div class="ballotin-weight">375g</div>
                                <div class="ballotin-pieces">37 sujets</div>
                                <div class="ballotin-price">18,75 â‚¬</div>
                                <div class="ballotin-icon">ðŸŽ</div>
                            </div>
                            <div class="ballotin-card" onclick="selectBallotin(500, 50, 25.00)">
                                <div class="ballotin-weight">500g</div>
                                <div class="ballotin-pieces">50 sujets</div>
                                <div class="ballotin-price">25,00 â‚¬</div>
                                <div class="ballotin-icon">ðŸŽ€</div>
                            </div>
                            <div class="ballotin-card" onclick="selectBallotin(750, 75, 37.50)">
                                <div class="ballotin-weight">750g</div>
                                <div class="ballotin-pieces">75 sujets</div>
                                <div class="ballotin-price">37,50 â‚¬</div>
                                <div class="ballotin-icon">ðŸŽ€</div>
                            </div>
                            <div class="ballotin-card" onclick="selectBallotin(1000, 100, 50.00)">
                                <div class="ballotin-weight">1kg</div>
                                <div class="ballotin-pieces">100 sujets</div>
                                <div class="ballotin-price">50,00 â‚¬</div>
                                <div class="ballotin-icon">ðŸ‘‘</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Step 2: Choose Chocolates -->
                <div id="step2" class="modal-step">
                    <div class="selected-ballotin-info">
                        <button class="back-btn" onclick="goToStep1()">â† Changer de ballotin</button>
                        <div class="ballotin-summary">
                            <span class="ballotin-chosen" id="ballotinChosen">Ballotin 500g</span>
                            <span class="pieces-remaining" id="piecesRemaining">50 sujets Ã  choisir</span>
                        </div>
                    </div>
                    
                    <!-- Progress Bar -->
                    <div class="progress-container">
                        <div class="progress-bar" id="progressBar"></div>
                        <div class="progress-text" id="progressText">0 / 50 sujets</div>
                    </div>
                    
                    <!-- Chocolats Noirs -->
                    <div class="chocolate-category">
                        <h3 class="category-title"><span>ðŸ«</span> Chocolats Noirs</h3>
                        <div class="chocolates-grid" id="darkChocolates"></div>
                    </div>
                    
                    <!-- Chocolats au Lait -->
                    <div class="chocolate-category">
                        <h3 class="category-title"><span>ðŸ¥›</span> Chocolats au Lait</h3>
                        <div class="chocolates-grid" id="milkChocolates"></div>
                    </div>
                    
                    <!-- Surprise Button -->
                    <button class="surprise-btn" onclick="surpriseSelection()">
                        ðŸŽ² Ballotin Surprise - Laissez-nous composer pour vous !
                    </button>
                </div>
                
                <!-- Step 3: Customer Information -->
                <div id="step3" class="modal-step">
                    <div class="selected-ballotin-info">
                        <button class="back-btn" onclick="goToStep2()">â† Modifier ma sÃ©lection</button>
                        <div class="ballotin-summary">
                            <span class="ballotin-chosen" id="ballotinChosen2">Ballotin 500g</span>
                            <span class="ballotin-price-display" id="priceDisplay">25,00 â‚¬</span>
                        </div>
                    </div>
                    
                    <h3 class="step-title"><span>ðŸ‘¤</span> Ã‰tape 3 : Vos coordonnÃ©es</h3>
                    <p class="step-description">Renseignez vos informations pour la commande</p>
                    
                    <form class="customer-form" id="customerForm">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="customerFirstName">PrÃ©nom *</label>
                                <input type="text" id="customerFirstName" required placeholder="Votre prÃ©nom">
                            </div>
                            <div class="form-group">
                                <label for="customerLastName">Nom *</label>
                                <input type="text" id="customerLastName" required placeholder="Votre nom">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="customerEmail">Email *</label>
                                <input type="email" id="customerEmail" required placeholder="votre@email.com">
                            </div>
                            <div class="form-group">
                                <label for="customerPhone">TÃ©lÃ©phone *</label>
                                <input type="tel" id="customerPhone" required placeholder="06 12 34 56 78">
                            </div>
                        </div>
                        
                        <!-- Delivery Options -->
                        <div class="delivery-options">
                            <h4>ðŸšš Mode de livraison</h4>
                            <label class="delivery-option selected" onclick="selectDelivery('pickup', 0)">
                                <input type="radio" name="delivery" value="pickup" checked>
                                <div class="delivery-details">
                                    <div class="delivery-name">Retrait en boutique</div>
                                    <div class="delivery-desc">6 rue Wilson, 57510 Puttelange-aux-Lacs</div>
                                </div>
                                <span class="delivery-price">Gratuit</span>
                            </label>
                            <label class="delivery-option" onclick="selectDelivery('colissimo', 6.90)">
                                <input type="radio" name="delivery" value="colissimo">
                                <div class="delivery-details">
                                    <div class="delivery-name">Colissimo Ã  domicile</div>
                                    <div class="delivery-desc">Livraison sous 2-3 jours ouvrÃ©s</div>
                                </div>
                                <span class="delivery-price">6,90 â‚¬</span>
                            </label>
                            <label class="delivery-option" onclick="selectDelivery('express', 12.90)">
                                <input type="radio" name="delivery" value="express">
                                <div class="delivery-details">
                                    <div class="delivery-name">Chronopost Express</div>
                                    <div class="delivery-desc">Livraison le lendemain avant 13h</div>
                                </div>
                                <span class="delivery-price">12,90 â‚¬</span>
                            </label>
                        </div>
                        
                        <!-- Shipping Address (shown when delivery selected) -->
                        <div class="shipping-address" id="shippingAddress" style="display:none; margin-top: 1rem;">
                            <div class="form-group">
                                <label for="customerAddress">Adresse de livraison *</label>
                                <input type="text" id="customerAddress" placeholder="NumÃ©ro et rue">
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="customerZip">Code postal *</label>
                                    <input type="text" id="customerZip" placeholder="57510">
                                </div>
                                <div class="form-group">
                                    <label for="customerCity">Ville *</label>
                                    <input type="text" id="customerCity" placeholder="Puttelange-aux-Lacs">
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group full-width" style="margin-top: 1rem;">
                            <label for="customerNotes">Instructions spÃ©ciales (optionnel)</label>
                            <textarea id="customerNotes" rows="2" placeholder="Ex: Date de retrait souhaitÃ©e, allergies..."></textarea>
                        </div>
                    </form>
                    
                    <!-- Order Summary -->
                    <div class="order-summary">
                        <h4>ðŸ“‹ RÃ©capitulatif de commande</h4>
                        <div class="summary-content" id="orderSummaryContent"></div>
                        <div class="summary-total">
                            <span>Total Ã  payer</span>
                            <span id="totalPrice">25,00 â‚¬</span>
                        </div>
                    </div>
                </div>
                
                <!-- Step 4: Payment -->
                <div id="step4" class="modal-step">
                    <div class="selected-ballotin-info">
                        <button class="back-btn" onclick="goToStep3()">â† Modifier mes coordonnÃ©es</button>
                        <div class="ballotin-summary">
                            <span class="ballotin-chosen" id="ballotinChosen3">Ballotin 500g</span>
                            <span class="ballotin-price-display" id="priceDisplay2">25,00 â‚¬</span>
                        </div>
                    </div>
                    
                    <h3 class="step-title"><span>ðŸ’³</span> Ã‰tape 4 : Paiement sÃ©curisÃ©</h3>
                    <p class="step-description">Paiement 100% sÃ©curisÃ© par carte bancaire</p>
                    
                    <div class="payment-container">
                        <div class="payment-info">
                            <div class="secure-badge">
                                <span>ðŸ”’</span> Paiement sÃ©curisÃ© SSL
                            </div>
                            <div class="card-icons">
                                <span class="card-icon">ðŸ’³ Visa</span>
                                <span class="card-icon">ðŸ’³ Mastercard</span>
                                <span class="card-icon">ðŸ’³ CB</span>
                            </div>
                        </div>
                        
                        <!-- Stripe Elements Container -->
                        <div id="stripePaymentForm">
                            <div class="form-group">
                                <label>Carte bancaire</label>
                                <div id="card-element" class="stripe-element"></div>
                                <div id="card-errors" class="card-errors" role="alert"></div>
                            </div>
                        </div>
                        
                        <!-- Fallback form if Stripe not configured -->
                        <div id="noStripeMessage" class="no-stripe-message">
                            <p>âš ï¸ Le paiement en ligne n'est pas encore configurÃ©.</p>
                            <p>Veuillez nous contacter pour finaliser votre commande :</p>
                            <p><strong>ðŸ“ž 03 55 78 19 85</strong></p>
                            <p><strong>ðŸ“§ chezrosechocolat@gmail.com</strong></p>
                        </div>
                        
                        <div class="payment-total">
                            <span>Montant Ã  dÃ©biter :</span>
                            <span class="total-amount" id="paymentTotal">25,00 â‚¬</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer" id="modalFooter">
                <div class="selection-summary">
                    <span class="selection-count" id="selectionCount">Choisissez un ballotin</span>
                    <span class="selection-text" id="selectionText"></span>
                </div>
                <div>
                    <button class="btn-reset" id="resetBtn" onclick="resetSelection()" style="display:none;">RÃ©initialiser</button>
                    <button class="btn-validate" id="validateBtn" onclick="validateCurrentStep()" style="display:none;">Continuer</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Gallery Section -->
    <section class="gallery" id="galerie">
        <div class="section-header reveal">
            <span class="section-label">Visite Virtuelle</span>
            <h2 class="section-title">Notre Univers Gourmand</h2>
            <p class="section-subtitle">Entrez dans notre boutique et laissez-vous tenter</p>
        </div>
        <div class="gallery-grid">
            <div class="gallery-item reveal" onclick="openLightbox(this)">
                <img src="images/comptoir-new.png" alt="Comptoir Chez Rose">
                <div class="gallery-overlay"><span>Notre comptoir</span></div>
            </div>
            <div class="gallery-item reveal" onclick="openLightbox(this)">
                <img src="images/vitrine2.jpeg" alt="Vitrine chocolats">
                <div class="gallery-overlay"><span>Nos vitrines</span></div>
            </div>
            <div class="gallery-item reveal" onclick="openLightbox(this)">
                <img src="images/comptoir2-new.png" alt="Chocolats artisanaux">
                <div class="gallery-overlay"><span>Chocolats fins</span></div>
            </div>
            <div class="gallery-item reveal" onclick="openLightbox(this)">
                <img src="images/cadeaux.jpeg" alt="IdÃ©es cadeaux">
                <div class="gallery-overlay"><span>IdÃ©es cadeaux</span></div>
            </div>
            <div class="gallery-item reveal" onclick="openLightbox(this)">
                <img src="images/logo-wall.jpeg" alt="Boutique Chez Rose">
                <div class="gallery-overlay"><span>La boutique</span></div>
            </div>
        </div>
    </section>
    
    <!-- Lightbox -->
    <div class="lightbox" id="lightbox">
        <span class="lightbox-close" onclick="closeLightbox()">&times;</span>
        <img src="" alt="Image agrandie" id="lightbox-img">
    </div>
    
    <!-- Contact Section -->
    <section class="contact" id="contact">
        <div class="section-header reveal">
            <span class="section-label">Rendez-nous Visite</span>
            <h2 class="section-title">Nous Contacter</h2>
            <p class="section-subtitle">Nous serons ravis de vous accueillir dans notre boutique</p>
        </div>
        <div class="contact-content">
            <div class="contact-info reveal">
                <h3>Informations Pratiques</h3>
                <div class="contact-item">
                    <div class="contact-icon">ðŸ“</div>
                    <div class="contact-details">
                        <h4>Adresse</h4>
                        <p>6 rue Wilson<br>57510 Puttelange-aux-Lacs</p>
                    </div>
                </div>
                <div class="contact-item">
                    <div class="contact-icon">ðŸ“ž</div>
                    <div class="contact-details">
                        <h4>TÃ©lÃ©phone</h4>
                        <p><a href="tel:0355781985">03 55 78 19 85</a></p>
                    </div>
                </div>
                <div class="contact-item">
                    <div class="contact-icon">âœ‰ï¸</div>
                    <div class="contact-details">
                        <h4>Email</h4>
                        <p><a href="mailto:chezrosechocolat@gmail.com">chezrosechocolat@gmail.com</a></p>
                    </div>
                </div>
            </div>
            <div class="contact-map reveal">
                <iframe 
                    src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2617.8!2d6.8924!3d49.0447!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x4795b8c2b8e8b8b7%3A0x0!2s6%20Rue%20Wilson%2C%2057510%20Puttelange-aux-Lacs!5e0!3m2!1sfr!2sfr!4v1704300000000!5m2!1sfr!2sfr" 
                    allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade">
                </iframe>
            </div>
        </div>
    </section>
    
    <!-- Footer -->
    <footer class="footer">
        <div class="footer-logo">Chez <span>Rose</span></div>
        <p>Chocolaterie Artisanale</p>
        <div class="social-links">
            <a href="https://wa.me/33355781985" target="_blank" aria-label="WhatsApp" title="WhatsApp">ðŸ’¬</a>
            <a href="https://www.facebook.com/share/17eYtj5d3P/?mibextid=wwXIfr" target="_blank" aria-label="Facebook" title="Facebook">ðŸ“˜</a>
            <a href="https://www.instagram.com/chez_rose_chocolat?igsh=bG9rM29jejJsa2Vt" target="_blank" aria-label="Instagram" title="Instagram">ðŸ“·</a>
        </div>
        
        <!-- Share Buttons -->
        <div class="share-section">
            <p class="share-title">Partagez notre boutique :</p>
            <div class="share-buttons">
                <a href="https://www.facebook.com/sharer/sharer.php?u=https://www.crchocolaterie.fr" target="_blank" class="share-btn facebook" title="Partager sur Facebook">
                    <svg viewBox="0 0 24 24" fill="currentColor"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>
                    Facebook
                </a>
                <a href="https://www.instagram.com/chez_rose_chocolat" target="_blank" class="share-btn instagram" title="Suivez-nous sur Instagram">
                    <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/></svg>
                    Instagram
                </a>
            </div>
        </div>
        
        <div class="legal-links">
            <a href="#" onclick="openLegalModal('mentions')">Mentions lÃ©gales</a>
            <a href="#" onclick="openLegalModal('cgv')">CGV</a>
            <a href="#" onclick="openLegalModal('privacy')">ConfidentialitÃ©</a>
        </div>
        <p>Â© 2025 Chez Rose Chocolaterie. Tous droits rÃ©servÃ©s.</p>
        <p class="admin-link" onclick="openLoginModal()">Administration</p>
    </footer>
    
    <!-- WhatsApp Floating Button -->
    <a href="https://wa.me/33355781985?text=Bonjour,%20je%20souhaite%20commander%20des%20chocolats" target="_blank" class="whatsapp-float" title="Contactez-nous sur WhatsApp">
        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/></svg>
    </a>
    
    <!-- Cookie Banner -->
    <div class="cookie-banner" id="cookieBanner">
        <div class="cookie-content">
            <p>ðŸª Ce site utilise des cookies pour amÃ©liorer votre expÃ©rience et analyser le trafic. En continuant, vous acceptez notre <a href="#" onclick="openLegalModal('privacy')">politique de confidentialitÃ©</a>.</p>
            <div class="cookie-buttons">
                <button class="cookie-btn accept" onclick="acceptCookies()">Accepter</button>
                <button class="cookie-btn decline" onclick="declineCookies()">Refuser</button>
            </div>
        </div>
    </div>
    
    <!-- Legal Modal -->
    <div class="legal-modal" id="legalModal">
        <div class="legal-modal-container">
            <div class="legal-modal-header">
                <h2 id="legalModalTitle">Mentions lÃ©gales</h2>
                <button class="modal-close" onclick="closeLegalModal()">Ã—</button>
            </div>
            <div class="legal-modal-body" id="legalModalContent">
            </div>
        </div>
    </div>
    
    <!-- Admin Login Modal -->
    <div class="admin-login-modal" id="adminLoginModal">
        <div class="admin-login-container">
            <h2>ðŸ” Administration</h2>
            <p>Entrez le mot de passe administrateur</p>
            <input type="password" id="adminPassword" placeholder="Mot de passe" onkeypress="if(event.key==='Enter')checkPassword()">
            <div class="admin-login-buttons">
                <button class="btn-cancel" onclick="closeLoginModal()">Annuler</button>
                <button class="btn-login" onclick="checkPassword()">Connexion</button>
            </div>
            <p class="login-error" id="loginError"></p>
        </div>
    </div>
    
    <!-- Admin Panel -->
    <div class="admin-panel" id="adminPanel">
        <div class="admin-panel-container">
            <div class="admin-header">
                <h2>âš™ï¸ Panneau d'Administration</h2>
                <p>GÃ©rez les images de votre site</p>
                <button class="admin-close" onclick="closeAdminPanel()">Ã—</button>
            </div>
            <div class="admin-body">
                <!-- Hero Image -->
                <div class="admin-section">
                    <h3>ðŸ  Image d'accueil (Hero)</h3>
                    <div class="image-manager">
                        <div class="current-image">
                            <img id="admin-hero-img" src="images/boutique-main.png" alt="Image actuelle">
                        </div>
                        <div class="image-controls">
                            <label class="upload-btn">
                                ðŸ“¤ Changer l'image
                                <input type="file" accept="image/*" onchange="updateImage('hero', this)">
                            </label>
                            <button class="reset-btn" onclick="resetImage('hero')">â†©ï¸ RÃ©initialiser</button>
                        </div>
                    </div>
                </div>
                
                <!-- About Images -->
                <div class="admin-section">
                    <h3>ðŸª Images de la boutique (Section Ã€ propos)</h3>
                    <div class="image-grid-admin">
                        <div class="image-manager">
                            <p class="image-label">Image principale</p>
                            <div class="current-image small">
                                <img id="admin-about1-img" src="images/logo-wall.jpeg" alt="Image actuelle">
                            </div>
                            <div class="image-controls">
                                <label class="upload-btn small">
                                    ðŸ“¤ Changer
                                    <input type="file" accept="image/*" onchange="updateImage('about1', this)">
                                </label>
                                <button class="reset-btn small" onclick="resetImage('about1')">â†©ï¸</button>
                            </div>
                        </div>
                        <div class="image-manager">
                            <p class="image-label">Image vitrine</p>
                            <div class="current-image small">
                                <img id="admin-about2-img" src="images/vitrine-new.png" alt="Image actuelle">
                            </div>
                            <div class="image-controls">
                                <label class="upload-btn small">
                                    ðŸ“¤ Changer
                                    <input type="file" accept="image/*" onchange="updateImage('about2', this)">
                                </label>
                                <button class="reset-btn small" onclick="resetImage('about2')">â†©ï¸</button>
                            </div>
                        </div>
                        <div class="image-manager">
                            <p class="image-label">Image chocolats</p>
                            <div class="current-image small">
                                <img id="admin-about3-img" src="images/chocolats-display.png" alt="Image actuelle">
                            </div>
                            <div class="image-controls">
                                <label class="upload-btn small">
                                    ðŸ“¤ Changer
                                    <input type="file" accept="image/*" onchange="updateImage('about3', this)">
                                </label>
                                <button class="reset-btn small" onclick="resetImage('about3')">â†©ï¸</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Products Images -->
                <div class="admin-section">
                    <h3>ðŸ« Images des produits</h3>
                    <div class="image-grid-admin">
                        <div class="image-manager">
                            <p class="image-label">Ballotins</p>
                            <div class="current-image small">
                                <img id="admin-product1-img" src="images/bonbons2.jpeg" alt="Image actuelle">
                            </div>
                            <div class="image-controls">
                                <label class="upload-btn small">
                                    ðŸ“¤ Changer
                                    <input type="file" accept="image/*" onchange="updateImage('product1', this)">
                                </label>
                                <button class="reset-btn small" onclick="resetImage('product1')">â†©ï¸</button>
                            </div>
                        </div>
                        <div class="image-manager">
                            <p class="image-label">DragÃ©es</p>
                            <div class="current-image small">
                                <img id="admin-product2-img" src="images/dragees.jpeg" alt="Image actuelle">
                            </div>
                            <div class="image-controls">
                                <label class="upload-btn small">
                                    ðŸ“¤ Changer
                                    <input type="file" accept="image/*" onchange="updateImage('product2', this)">
                                </label>
                                <button class="reset-btn small" onclick="resetImage('product2')">â†©ï¸</button>
                            </div>
                        </div>
                        <div class="image-manager">
                            <p class="image-label">Moulages</p>
                            <div class="current-image small">
                                <img id="admin-product3-img" src="images/noel.jpeg" alt="Image actuelle">
                            </div>
                            <div class="image-controls">
                                <label class="upload-btn small">
                                    ðŸ“¤ Changer
                                    <input type="file" accept="image/*" onchange="updateImage('product3', this)">
                                </label>
                                <button class="reset-btn small" onclick="resetImage('product3')">â†©ï¸</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Gallery Images -->
                <div class="admin-section">
                    <h3>ðŸ–¼ï¸ Images de la galerie</h3>
                    <div class="image-grid-admin">
                        <div class="image-manager">
                            <p class="image-label">Galerie 1</p>
                            <div class="current-image small">
                                <img id="admin-gallery1-img" src="images/comptoir-new.png" alt="Image actuelle">
                            </div>
                            <div class="image-controls">
                                <label class="upload-btn small">
                                    ðŸ“¤ Changer
                                    <input type="file" accept="image/*" onchange="updateImage('gallery1', this)">
                                </label>
                                <button class="reset-btn small" onclick="resetImage('gallery1')">â†©ï¸</button>
                            </div>
                        </div>
                        <div class="image-manager">
                            <p class="image-label">Galerie 2</p>
                            <div class="current-image small">
                                <img id="admin-gallery2-img" src="images/vitrine2.jpeg" alt="Image actuelle">
                            </div>
                            <div class="image-controls">
                                <label class="upload-btn small">
                                    ðŸ“¤ Changer
                                    <input type="file" accept="image/*" onchange="updateImage('gallery2', this)">
                                </label>
                                <button class="reset-btn small" onclick="resetImage('gallery2')">â†©ï¸</button>
                            </div>
                        </div>
                        <div class="image-manager">
                            <p class="image-label">Galerie 3</p>
                            <div class="current-image small">
                                <img id="admin-gallery3-img" src="images/comptoir2-new.png" alt="Image actuelle">
                            </div>
                            <div class="image-controls">
                                <label class="upload-btn small">
                                    ðŸ“¤ Changer
                                    <input type="file" accept="image/*" onchange="updateImage('gallery3', this)">
                                </label>
                                <button class="reset-btn small" onclick="resetImage('gallery3')">â†©ï¸</button>
                            </div>
                        </div>
                        <div class="image-manager">
                            <p class="image-label">Galerie 4</p>
                            <div class="current-image small">
                                <img id="admin-gallery4-img" src="images/cadeaux.jpeg" alt="Image actuelle">
                            </div>
                            <div class="image-controls">
                                <label class="upload-btn small">
                                    ðŸ“¤ Changer
                                    <input type="file" accept="image/*" onchange="updateImage('gallery4', this)">
                                </label>
                                <button class="reset-btn small" onclick="resetImage('gallery4')">â†©ï¸</button>
                            </div>
                        </div>
                        <div class="image-manager">
                            <p class="image-label">Galerie 5</p>
                            <div class="current-image small">
                                <img id="admin-gallery5-img" src="images/logo-wall.jpeg" alt="Image actuelle">
                            </div>
                            <div class="image-controls">
                                <label class="upload-btn small">
                                    ðŸ“¤ Changer
                                    <input type="file" accept="image/*" onchange="updateImage('gallery5', this)">
                                </label>
                                <button class="reset-btn small" onclick="resetImage('gallery5')">â†©ï¸</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Payment Configuration Section -->
                <div class="admin-section">
                    <h3>âš™ï¸ FonctionnalitÃ©s du site</h3>
                    <p class="admin-description">Activez ou dÃ©sactivez les fonctionnalitÃ©s du site.</p>
                    
                    <div class="feature-toggles">
                        <div class="feature-toggle">
                            <div class="feature-info">
                                <span class="feature-icon">ðŸŽ</span>
                                <div class="feature-details">
                                    <span class="feature-name">Commande de ballotins</span>
                                    <span class="feature-desc">Affiche la carte "Ballotins" et permet la commande en ligne (masquÃ© si dÃ©sactivÃ©)</span>
                                </div>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="toggleBallotin" checked onchange="toggleFeature('ballotin', this.checked)">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        
                        <div class="feature-toggle">
                            <div class="feature-info">
                                <span class="feature-icon">ðŸ’¬</span>
                                <div class="feature-details">
                                    <span class="feature-name">Bouton WhatsApp</span>
                                    <span class="feature-desc">Affiche le bouton WhatsApp flottant pour contact rapide</span>
                                </div>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="toggleWhatsapp" checked onchange="toggleFeature('whatsapp', this.checked)">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        
                        <div class="feature-toggle">
                            <div class="feature-info">
                                <span class="feature-icon">ðŸ“ž</span>
                                <div class="feature-details">
                                    <span class="feature-name">Bouton Appel tÃ©lÃ©phonique</span>
                                    <span class="feature-desc">Affiche le bouton d'appel direct dans la section contact</span>
                                </div>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="togglePhone" checked onchange="toggleFeature('phone', this.checked)">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                    </div>
                </div>
                
                <div class="admin-section">
                    <h3>ðŸ’³ Configuration du paiement (TPE)</h3>
                    <p class="admin-description">Configurez votre terminal de paiement Stripe pour accepter les paiements en ligne sÃ©curisÃ©s.</p>
                    
                    <div class="payment-config">
                        <div class="config-status" id="stripeStatus">
                            <span class="status-indicator inactive"></span>
                            <span>Paiement en ligne : <strong id="paymentStatusText">Non configurÃ©</strong></span>
                        </div>
                        
                        <div class="config-form">
                            <div class="form-group">
                                <label for="stripePublicKey">ClÃ© publique Stripe (pk_...)</label>
                                <input type="text" id="stripePublicKey" placeholder="pk_live_xxxxx ou pk_test_xxxxx">
                                <small>Trouvez cette clÃ© dans votre <a href="https://dashboard.stripe.com/apikeys" target="_blank">Dashboard Stripe</a></small>
                            </div>
                            
                            <div class="form-group">
                                <label for="stripeSecretKey">ClÃ© secrÃ¨te Stripe (sk_...)</label>
                                <input type="password" id="stripeSecretKey" placeholder="sk_live_xxxxx ou sk_test_xxxxx">
                                <small>âš ï¸ Ne partagez jamais cette clÃ©. Elle est stockÃ©e localement.</small>
                            </div>
                            
                            <div class="config-info">
                                <h4>ðŸ“‹ Comment obtenir vos clÃ©s Stripe ?</h4>
                                <ol>
                                    <li>CrÃ©ez un compte sur <a href="https://stripe.com" target="_blank">stripe.com</a></li>
                                    <li>AccÃ©dez Ã  <strong>DÃ©veloppeurs â†’ ClÃ©s API</strong></li>
                                    <li>Copiez la <strong>ClÃ© publiable</strong> (pk_...)</li>
                                    <li>Copiez la <strong>ClÃ© secrÃ¨te</strong> (sk_...)</li>
                                    <li>Pour tester, utilisez les clÃ©s de test (pk_test_... / sk_test_...)</li>
                                </ol>
                            </div>
                            
                            <div class="config-actions">
                                <button class="btn-test-stripe" onclick="testStripeConnection()">ðŸ” Tester la connexion</button>
                                <button class="btn-save-stripe" onclick="saveStripeConfig()">ðŸ’¾ Enregistrer</button>
                            </div>
                            
                            <div class="test-result" id="stripeTestResult"></div>
                        </div>
                        
                        <div class="pricing-config">
                            <h4>ðŸ’° Configuration des prix</h4>
                            <div class="price-grid">
                                <div class="price-item">
                                    <label>Ballotin 250g</label>
                                    <input type="number" step="0.01" id="price250" value="12.50"> â‚¬
                                </div>
                                <div class="price-item">
                                    <label>Ballotin 375g</label>
                                    <input type="number" step="0.01" id="price375" value="18.75"> â‚¬
                                </div>
                                <div class="price-item">
                                    <label>Ballotin 500g</label>
                                    <input type="number" step="0.01" id="price500" value="25.00"> â‚¬
                                </div>
                                <div class="price-item">
                                    <label>Ballotin 750g</label>
                                    <input type="number" step="0.01" id="price750" value="37.50"> â‚¬
                                </div>
                                <div class="price-item">
                                    <label>Ballotin 1kg</label>
                                    <input type="number" step="0.01" id="price1000" value="50.00"> â‚¬
                                </div>
                            </div>
                            <button class="btn-save-prices" onclick="savePrices()">ðŸ’¾ Enregistrer les prix</button>
                        </div>
                        
                        <!-- Admin Stats Dashboard -->
                        <div class="admin-stats" id="adminStats">
                            <div class="stat-card">
                                <span class="stat-value">0</span>
                                <span class="stat-label">Commandes totales</span>
                            </div>
                            <div class="stat-card chocolate">
                                <span class="stat-value">0,00 â‚¬</span>
                                <span class="stat-label">Chiffre d'affaires</span>
                            </div>
                            <div class="stat-card">
                                <span class="stat-value">0</span>
                                <span class="stat-label">Commandes payÃ©es</span>
                            </div>
                            <div class="stat-card">
                                <span class="stat-value">0</span>
                                <span class="stat-label">En attente</span>
                            </div>
                        </div>
                        
                        <!-- Orders Section -->
                        <div class="orders-section">
                            <h4>ðŸ“¦ DerniÃ¨res commandes</h4>
                            <div class="orders-list" id="ordersList">
                                <p class="no-orders">Aucune commande pour le moment</p>
                            </div>
                            <button class="btn-export-orders" onclick="exportOrders()">ðŸ“¥ Exporter les commandes (CSV)</button>
                        </div>
                        
                        <!-- Analytics Config -->
                        <div class="analytics-config" style="border-top: 2px solid var(--rose-light); padding-top: 1.5rem; margin-top: 1.5rem;">
                            <h4>ðŸ“Š Google Analytics</h4>
                            <div class="form-group" style="margin-top: 1rem;">
                                <label for="gaId">ID Google Analytics (GA4)</label>
                                <input type="text" id="gaId" placeholder="G-XXXXXXXXXX" style="width: 100%; padding: 0.8rem; border: 2px solid var(--rose-light); border-radius: 8px;">
                                <small style="color: var(--text-light);">Format: G-XXXXXXXXXX (trouvez-le dans votre compte Google Analytics)</small>
                            </div>
                            <button onclick="saveAnalyticsConfig()" style="margin-top: 1rem; padding: 0.8rem 1.5rem; background: var(--chocolat); color: white; border: none; border-radius: 25px; cursor: pointer;">ðŸ’¾ Enregistrer</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="admin-footer">
                <button class="btn-reset-all" onclick="resetAllImages()">ðŸ”„ RÃ©initialiser toutes les images</button>
                <button class="btn-save" onclick="closeAdminPanel()">âœ“ Fermer</button>
            </div>
        </div>
    </div>
    
    <!-- Toast Notification -->
    <div class="toast" id="toast"></div>
    
    <!-- Success Modal -->
    <div class="success-modal" id="successModal">
        <div class="success-content">
            <div class="success-icon">âœ…</div>
            <h2>Commande confirmÃ©e !</h2>
            <p>Merci pour votre commande.</p>
            <p>Vous recevrez un email de confirmation Ã  l'adresse indiquÃ©e.</p>
            <div class="order-number" id="orderNumber">CMD-000000</div>
            <p><strong>Retrait en boutique :</strong></p>
            <p>6 rue Wilson, 57510 Puttelange-aux-Lacs</p>
            <p>ðŸ“ž 03 55 78 19 85</p>
            <button class="btn btn-primary" onclick="closeSuccessModal()">Fermer</button>
        </div>
    </div>
    
    <script>
        // Chocolate data with ingredients and allergens
        const darkChocolates = [
            { id: 'palet-speculoos', name: 'Palet spÃ©culoos chocolat', image: 'images/chocolats-noirs.png', ingredients: 'Chocolat noir 64%, spÃ©culoos, beurre de cacao', allergens: ['gluten', 'lait'] },
            { id: 'coeur-orange', name: "CÅ“ur d'orange", image: 'images/chocolats-noirs.png', ingredients: 'Chocolat noir 70%, Ã©corces d\'orange confites, ganache', allergens: ['lait'] },
            { id: 'palet-equateur', name: '70% Palet Ã©quateur', image: 'images/chocolats-noirs.png', ingredients: 'Chocolat noir origine Ã‰quateur 70%, beurre de cacao', allergens: ['lait'] },
            { id: 'gianduja-praline', name: 'Gianduja PralinÃ©', image: 'images/chocolats-noirs.png', ingredients: 'Chocolat noir, pralinÃ© noisettes, Ã©clats de noisettes', allergens: ['fruits Ã  coque', 'lait'] },
            { id: 'rocher-pistache', name: 'Rocher Pistache', image: 'images/chocolats-noirs.png', ingredients: 'Chocolat noir, pÃ¢te de pistache, pistaches concassÃ©es', allergens: ['fruits Ã  coque', 'lait'] }
        ];
        
        const milkChocolates = [
            { id: 'gianduja-noisette', name: 'Gianduja cÅ“ur noisette lait', image: 'images/chocolats-lait.png', ingredients: 'Chocolat au lait, pralinÃ©, noisette entiÃ¨re', allergens: ['fruits Ã  coque', 'lait'] },
            { id: 'ganache-vanille', name: 'Ganache vanille lait', image: 'images/chocolats-lait.png', ingredients: 'Chocolat au lait, crÃ¨me, vanille de Madagascar', allergens: ['lait'] },
            { id: 'carre-praline', name: 'CarrÃ© Lait pralinÃ©', image: 'images/chocolats-lait.png', ingredients: 'Chocolat au lait 38%, pralinÃ© amandes noisettes', allergens: ['fruits Ã  coque', 'lait'] },
            { id: 'palet-blond', name: 'Palet blond', image: 'images/chocolats-lait.png', ingredients: 'Chocolat blond caramÃ©lisÃ©, fleur de sel', allergens: ['lait'] },
            { id: 'palet-cappuccino', name: 'Palet cappuccino', image: 'images/chocolats-lait.png', ingredients: 'Chocolat au lait, ganache cafÃ©, poudre de cappuccino', allergens: ['lait'] }
        ];
        
        // State
        let selectedBallotin = { weight: 0, pieces: 0, price: 0 };
        let selectedChocolates = {};
        let currentStep = 1;
        let customerInfo = {};
        let stripe = null;
        let cardElement = null;
        
        // Delivery
        let selectedDelivery = { type: 'pickup', price: 0 };
        
        // Get all chocolates for display
        const allChocolates = [...darkChocolates, ...milkChocolates];
        
        // Initialize chocolates grid
        function initChocolates() {
            const darkGrid = document.getElementById('darkChocolates');
            const milkGrid = document.getElementById('milkChocolates');
            
            darkChocolates.forEach((choco, index) => {
                darkGrid.appendChild(createChocolateItem(choco, index, 'dark'));
            });
            
            milkChocolates.forEach((choco, index) => {
                milkGrid.appendChild(createChocolateItem(choco, index, 'milk'));
            });
        }
        
        function createChocolateItem(choco, index, type) {
            const div = document.createElement('div');
            div.className = 'chocolate-item';
            div.id = `choco-${choco.id}`;
            div.onclick = () => toggleChocolate(choco.id);
            
            const cropPosition = index * 20;
            const allergensHtml = choco.allergens.map(a => `<span class="allergen-tag">${a}</span>`).join('');
            
            div.innerHTML = `
                <button class="chocolate-info-btn" onclick="event.stopPropagation(); toggleTooltip('${choco.id}')">i</button>
                <div class="chocolate-tooltip" id="tooltip-${choco.id}">
                    <strong>${choco.name}</strong><br>
                    <small>${choco.ingredients}</small><br>
                    <div style="margin-top: 0.3rem;"><strong>AllergÃ¨nes:</strong> ${allergensHtml}</div>
                </div>
                <div style="width: 100%; height: 80px; overflow: hidden; margin-bottom: 0.8rem;">
                    <img class="chocolate-image" src="${choco.image}" alt="${choco.name}" 
                         style="width: 500%; height: 100%; object-fit: contain; margin-left: -${cropPosition * 5}%;">
                </div>
                <div class="chocolate-name">${choco.name}</div>
                <div class="quantity-control">
                    <button class="qty-btn" onclick="event.stopPropagation(); changeQuantity('${choco.id}', -1)">âˆ’</button>
                    <span class="qty-value" id="qty-${choco.id}">1</span>
                    <button class="qty-btn" onclick="event.stopPropagation(); changeQuantity('${choco.id}', 1)">+</button>
                </div>
            `;
            
            return div;
        }
        
        function toggleTooltip(id) {
            const tooltip = document.getElementById(`tooltip-${id}`);
            document.querySelectorAll('.chocolate-tooltip').forEach(t => {
                if (t.id !== `tooltip-${id}`) t.classList.remove('show');
            });
            tooltip.classList.toggle('show');
        }
        
        // Step 1: Select Ballotin
        function selectBallotin(weight, pieces, price) {
            selectedBallotin = { weight, pieces, price };
            
            // Update UI
            document.querySelectorAll('.ballotin-card').forEach(card => card.classList.remove('selected'));
            event.currentTarget.classList.add('selected');
            
            // Go to step 2 after a brief delay
            setTimeout(() => {
                goToStep2();
            }, 300);
        }
        
        // Update step indicators
        function updateStepIndicators(step) {
            document.querySelectorAll('.step-indicator').forEach((ind, index) => {
                ind.classList.remove('active', 'completed');
                if (index + 1 < step) {
                    ind.classList.add('completed');
                } else if (index + 1 === step) {
                    ind.classList.add('active');
                }
            });
        }
        
        function goToStep1() {
            currentStep = 1;
            updateStepIndicators(1);
            document.querySelectorAll('.modal-step').forEach(s => s.classList.remove('active'));
            document.getElementById('step1').classList.add('active');
            document.getElementById('modalSubtitle').textContent = 'Choisissez la taille de votre ballotin';
            document.getElementById('resetBtn').style.display = 'none';
            document.getElementById('validateBtn').style.display = 'none';
            document.getElementById('selectionCount').textContent = 'Choisissez un ballotin';
            document.getElementById('selectionText').textContent = '';
            resetSelection();
        }
        
        function goToStep2() {
            currentStep = 2;
            updateStepIndicators(2);
            document.querySelectorAll('.modal-step').forEach(s => s.classList.remove('active'));
            document.getElementById('step2').classList.add('active');
            document.getElementById('modalSubtitle').textContent = 'SÃ©lectionnez vos chocolats (10g par sujet)';
            document.getElementById('resetBtn').style.display = 'inline-block';
            document.getElementById('validateBtn').style.display = 'inline-block';
            document.getElementById('validateBtn').textContent = 'Continuer â†’';
            
            // Update ballotin info display
            const weightDisplay = selectedBallotin.weight >= 1000 ? '1kg' : selectedBallotin.weight + 'g';
            document.getElementById('ballotinChosen').textContent = `Ballotin ${weightDisplay}`;
            
            updateSelectionCount();
        }
        
        function goToStep3() {
            currentStep = 3;
            updateStepIndicators(3);
            document.querySelectorAll('.modal-step').forEach(s => s.classList.remove('active'));
            document.getElementById('step3').classList.add('active');
            document.getElementById('modalSubtitle').textContent = 'Renseignez vos coordonnÃ©es';
            document.getElementById('resetBtn').style.display = 'none';
            document.getElementById('validateBtn').style.display = 'inline-block';
            document.getElementById('validateBtn').textContent = 'Continuer vers le paiement â†’';
            
            // Reset delivery and promo for fresh calculation
            selectedDelivery = { type: 'pickup', price: 0 };
            document.querySelectorAll('.delivery-option').forEach((opt, i) => {
                opt.classList.toggle('selected', i === 0);
            });
            document.getElementById('shippingAddress').style.display = 'none';
            
            // Update displays
            const weightDisplay = selectedBallotin.weight >= 1000 ? '1kg' : selectedBallotin.weight + 'g';
            document.getElementById('ballotinChosen2').textContent = `Ballotin ${weightDisplay}`;
            document.getElementById('priceDisplay').textContent = formatPrice(selectedBallotin.price);
            
            // Update footer
            document.getElementById('selectionCount').textContent = `Total : ${formatPrice(selectedBallotin.price)}`;
            document.getElementById('selectionText').textContent = '';
            
            // Generate order summary
            generateOrderSummary();
        }
        
        function goToStep4() {
            currentStep = 4;
            updateStepIndicators(4);
            document.querySelectorAll('.modal-step').forEach(s => s.classList.remove('active'));
            document.getElementById('step4').classList.add('active');
            document.getElementById('modalSubtitle').textContent = 'Finalisez votre commande';
            
            const { total } = calculateTotal();
            document.getElementById('validateBtn').textContent = 'ðŸ’³ Payer ' + formatPrice(total);
            
            // Update displays
            const weightDisplay = selectedBallotin.weight >= 1000 ? '1kg' : selectedBallotin.weight + 'g';
            document.getElementById('ballotinChosen3').textContent = `Ballotin ${weightDisplay}`;
            document.getElementById('priceDisplay2').textContent = formatPrice(total);
            document.getElementById('paymentTotal').textContent = formatPrice(total);
            
            // Initialize Stripe if configured
            initializeStripe();
        }
        
        function formatPrice(price) {
            return price.toFixed(2).replace('.', ',') + ' â‚¬';
        }
        
        function generateOrderSummary() {
            const summaryContent = document.getElementById('orderSummaryContent');
            const weightDisplay = selectedBallotin.weight >= 1000 ? '1kg' : selectedBallotin.weight + 'g';
            const { subtotal, shipping, total } = calculateTotal();
            
            let html = `<div class="summary-item"><span>Ballotin ${weightDisplay} (${selectedBallotin.pieces} sujets)</span><span>${formatPrice(selectedBallotin.price)}</span></div>`;
            html += `<div style="margin-top: 0.5rem; font-size: 0.85rem;"><strong>Composition :</strong></div>`;
            
            Object.keys(selectedChocolates).forEach(id => {
                const choco = allChocolates.find(c => c.id === id);
                if (choco) {
                    html += `<div class="summary-item" style="font-size: 0.85rem;"><span>â€¢ ${choco.name}</span><span>x${selectedChocolates[id]}</span></div>`;
                }
            });
            
            // Delivery
            const deliveryNames = { pickup: 'Retrait en boutique', colissimo: 'Colissimo', express: 'Chronopost Express' };
            html += `<div class="summary-item" style="margin-top: 0.8rem; padding-top: 0.5rem; border-top: 1px solid rgba(255,255,255,0.2);"><span>ðŸšš ${deliveryNames[selectedDelivery.type]}</span><span>${shipping > 0 ? formatPrice(shipping) : 'Gratuit'}</span></div>`;
            
            summaryContent.innerHTML = html;
            document.getElementById('totalPrice').textContent = formatPrice(total);
        }
        
        // Validate current step and proceed
        function validateCurrentStep() {
            if (currentStep === 2) {
                // Validate chocolate selection
                const totalPieces = getTotalPieces();
                const maxPieces = selectedBallotin.pieces;
                
                if (totalPieces === 0) {
                    showToast('Veuillez sÃ©lectionner au moins un chocolat');
                    return;
                }
                
                if (totalPieces !== maxPieces) {
                    showToast(`Votre ballotin doit contenir exactement ${maxPieces} sujets (actuellement: ${totalPieces})`);
                    return;
                }
                
                goToStep3();
            } else if (currentStep === 3) {
                // Validate customer form
                const firstName = document.getElementById('customerFirstName').value.trim();
                const lastName = document.getElementById('customerLastName').value.trim();
                const email = document.getElementById('customerEmail').value.trim();
                const phone = document.getElementById('customerPhone').value.trim();
                
                if (!firstName || !lastName || !email || !phone) {
                    showToast('Veuillez remplir tous les champs obligatoires');
                    return;
                }
                
                if (!isValidEmail(email)) {
                    showToast('Veuillez entrer une adresse email valide');
                    return;
                }
                
                // Check shipping address if delivery selected
                if (selectedDelivery.type !== 'pickup') {
                    const address = document.getElementById('customerAddress').value.trim();
                    const zip = document.getElementById('customerZip').value.trim();
                    const city = document.getElementById('customerCity').value.trim();
                    
                    if (!address || !zip || !city) {
                        showToast('Veuillez remplir l\'adresse de livraison');
                        return;
                    }
                }
                
                // Save customer info
                customerInfo = {
                    firstName,
                    lastName,
                    email,
                    phone,
                    address: document.getElementById('customerAddress').value.trim(),
                    zip: document.getElementById('customerZip').value.trim(),
                    city: document.getElementById('customerCity').value.trim(),
                    notes: document.getElementById('customerNotes').value.trim(),
                    delivery: selectedDelivery
                };
                
                goToStep4();
            } else if (currentStep === 4) {
                // Process payment
                processPayment();
            }
        }
        
        function isValidEmail(email) {
            return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
        }
        
        // Surprise selection - random chocolate selection
        function surpriseSelection() {
            resetSelection();
            const totalPieces = selectedBallotin.pieces;
            let remaining = totalPieces;
            
            // Randomly distribute pieces among all chocolates
            while (remaining > 0) {
                const randomChoco = allChocolates[Math.floor(Math.random() * allChocolates.length)];
                const maxToAdd = Math.min(remaining, Math.ceil(totalPieces / 5));
                const toAdd = Math.floor(Math.random() * maxToAdd) + 1;
                
                if (!selectedChocolates[randomChoco.id]) {
                    selectedChocolates[randomChoco.id] = 0;
                    document.getElementById(`choco-${randomChoco.id}`).classList.add('selected');
                }
                
                selectedChocolates[randomChoco.id] += toAdd;
                remaining -= toAdd;
                
                if (remaining < 0) {
                    selectedChocolates[randomChoco.id] += remaining;
                    remaining = 0;
                }
                
                document.getElementById(`qty-${randomChoco.id}`).textContent = selectedChocolates[randomChoco.id];
            }
            
            updateSelectionCount();
            showToast('ðŸŽ² Ballotin surprise composÃ© ! Vous pouvez ajuster si besoin.');
        }
        
        // Delivery selection
        function selectDelivery(type, price) {
            selectedDelivery = { type, price };
            
            document.querySelectorAll('.delivery-option').forEach(opt => opt.classList.remove('selected'));
            event.currentTarget.classList.add('selected');
            
            // Show/hide shipping address
            const shippingDiv = document.getElementById('shippingAddress');
            if (type !== 'pickup') {
                shippingDiv.style.display = 'block';
            } else {
                shippingDiv.style.display = 'none';
            }
            
            updateTotalPrice();
        }
        
        // Calculate total with delivery
        function calculateTotal() {
            let subtotal = selectedBallotin.price;
            let shipping = selectedDelivery.price;
            const total = subtotal + shipping;
            return { subtotal, shipping, total };
        }
        
        function updateTotalPrice() {
            const { total } = calculateTotal();
            
            // Update all price displays
            document.getElementById('totalPrice').textContent = formatPrice(total);
            document.getElementById('paymentTotal').textContent = formatPrice(total);
            
            // Update order summary if visible
            const summaryContent = document.getElementById('orderSummaryContent');
            if (summaryContent) {
                generateOrderSummary();
            }
        }
        
        function toggleChocolate(id) {
            const item = document.getElementById(`choco-${id}`);
            
            if (selectedChocolates[id]) {
                delete selectedChocolates[id];
                item.classList.remove('selected');
            } else {
                selectedChocolates[id] = 1;
                item.classList.add('selected');
            }
            
            updateSelectionCount();
        }
        
        function changeQuantity(id, delta) {
            if (!selectedChocolates[id]) return;
            
            const totalSelected = getTotalPieces();
            const maxAllowed = selectedBallotin.pieces;
            
            let newQty = selectedChocolates[id] + delta;
            
            // Minimum 1
            if (newQty < 1) newQty = 1;
            
            // Don't allow exceeding max pieces
            if (delta > 0 && totalSelected >= maxAllowed) {
                showToast(`Votre ballotin est complet (${maxAllowed} sujets)`);
                return;
            }
            
            selectedChocolates[id] = newQty;
            document.getElementById(`qty-${id}`).textContent = newQty;
            updateSelectionCount();
        }
        
        function getTotalPieces() {
            return Object.values(selectedChocolates).reduce((a, b) => a + b, 0);
        }
        
        function updateSelectionCount() {
            const totalPieces = getTotalPieces();
            const maxPieces = selectedBallotin.pieces;
            const remaining = maxPieces - totalPieces;
            const varieties = Object.keys(selectedChocolates).length;
            
            // Update pieces remaining
            document.getElementById('piecesRemaining').textContent = 
                remaining > 0 ? `${remaining} sujet(s) restant(s)` : 
                remaining === 0 ? 'âœ“ Ballotin complet !' : 
                `${Math.abs(remaining)} sujet(s) en trop !`;
            
            // Update progress bar
            const progressPercent = Math.min((totalPieces / maxPieces) * 100, 100);
            const progressBar = document.getElementById('progressBar');
            const progressContainer = document.querySelector('.progress-container');
            
            progressBar.style.width = progressPercent + '%';
            document.getElementById('progressText').textContent = `${totalPieces} / ${maxPieces} sujets`;
            
            // Update progress bar color
            progressContainer.classList.remove('complete', 'over');
            if (totalPieces === maxPieces) {
                progressContainer.classList.add('complete');
            } else if (totalPieces > maxPieces) {
                progressContainer.classList.add('over');
            }
            
            // Update footer
            document.getElementById('selectionCount').textContent = 
                `${varieties} variÃ©tÃ©(s) â€¢ ${totalPieces}/${maxPieces} sujets`;
            document.getElementById('selectionText').textContent = 
                remaining > 0 ? `Encore ${remaining} Ã  choisir` : 
                remaining === 0 ? 'PrÃªt Ã  valider !' : 'Retirez des sujets';
        }
        
        function resetSelection() {
            selectedChocolates = {};
            document.querySelectorAll('.chocolate-item').forEach(item => {
                item.classList.remove('selected');
            });
            document.querySelectorAll('[id^="qty-"]').forEach(qty => {
                qty.textContent = '1';
            });
            if (currentStep === 2) {
                updateSelectionCount();
            }
        }
        
        // Initialize Stripe
        function initializeStripe() {
            const stripeKey = localStorage.getItem('chezrose_stripe_public');
            const stripeForm = document.getElementById('stripePaymentForm');
            const noStripeMsg = document.getElementById('noStripeMessage');
            
            if (stripeKey) {
                try {
                    stripe = Stripe(stripeKey);
                    const elements = stripe.elements();
                    cardElement = elements.create('card', {
                        style: {
                            base: {
                                fontSize: '16px',
                                color: '#3d2b22',
                                '::placeholder': { color: '#aab7c4' }
                            }
                        }
                    });
                    cardElement.mount('#card-element');
                    
                    cardElement.on('change', (event) => {
                        const displayError = document.getElementById('card-errors');
                        displayError.textContent = event.error ? event.error.message : '';
                    });
                    
                    stripeForm.style.display = 'block';
                    noStripeMsg.style.display = 'none';
                } catch (e) {
                    console.error('Stripe init error:', e);
                    stripeForm.style.display = 'none';
                    noStripeMsg.style.display = 'block';
                }
            } else {
                stripeForm.style.display = 'none';
                noStripeMsg.style.display = 'block';
            }
        }
        
        // Process payment
        async function processPayment() {
            const btn = document.getElementById('validateBtn');
            btn.classList.add('processing');
            btn.textContent = 'Traitement en cours...';
            
            const stripeKey = localStorage.getItem('chezrose_stripe_public');
            
            if (!stripeKey || !stripe || !cardElement) {
                // No Stripe configured - create order without payment
                await createOrder('pending');
                btn.classList.remove('processing');
                return;
            }
            
            try {
                // In production, you would create a PaymentIntent on your server
                // For demo, we simulate a successful payment
                const { error, paymentMethod } = await stripe.createPaymentMethod({
                    type: 'card',
                    card: cardElement,
                    billing_details: {
                        name: `${customerInfo.firstName} ${customerInfo.lastName}`,
                        email: customerInfo.email,
                        phone: customerInfo.phone
                    }
                });
                
                if (error) {
                    document.getElementById('card-errors').textContent = error.message;
                    btn.classList.remove('processing');
                    btn.textContent = 'ðŸ’³ Payer ' + formatPrice(selectedBallotin.price);
                    return;
                }
                
                // Payment successful
                await createOrder('paid', paymentMethod.id);
                
            } catch (e) {
                showToast('Erreur de paiement : ' + e.message);
                btn.classList.remove('processing');
                btn.textContent = 'ðŸ’³ Payer ' + formatPrice(selectedBallotin.price);
            }
        }
        
        // Create order
        async function createOrder(status, paymentId = null) {
            const orderId = 'CMD-' + Date.now().toString(36).toUpperCase();
            const { subtotal, shipping, total } = calculateTotal();
            
            const order = {
                id: orderId,
                date: new Date().toISOString(),
                status: status,
                paymentId: paymentId,
                ballotin: {
                    weight: selectedBallotin.weight,
                    pieces: selectedBallotin.pieces,
                    price: selectedBallotin.price
                },
                chocolates: { ...selectedChocolates },
                customer: { ...customerInfo },
                delivery: { ...selectedDelivery },
                totals: { subtotal, shipping, total }
            };
            
            // Save order to localStorage
            let orders = JSON.parse(localStorage.getItem('chezrose_orders') || '[]');
            orders.unshift(order);
            localStorage.setItem('chezrose_orders', JSON.stringify(orders));
            
            // Show success
            document.getElementById('orderNumber').textContent = orderId;
            closeChocolateModal();
            document.getElementById('successModal').classList.add('active');
            
            showToast('âœ“ Commande enregistrÃ©e !');
        }
        
        function closeSuccessModal() {
            document.getElementById('successModal').classList.remove('active');
        }
        
        function showToast(message) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 4000);
        }
        
        // Modal functions
        function openChocolateModal() {
            document.getElementById('chocolateModal').classList.add('active');
            document.body.style.overflow = 'hidden';
            goToStep1();
        }
        
        function closeChocolateModal() {
            document.getElementById('chocolateModal').classList.remove('active');
            document.body.style.overflow = '';
        }
        
        // Navbar scroll effect
        const navbar = document.querySelector('.navbar');
        window.addEventListener('scroll', () => {
            navbar.classList.toggle('scrolled', window.scrollY > 100);
        });
        
        // Mobile menu toggle
        const menuToggle = document.querySelector('.menu-toggle');
        const navLinks = document.querySelector('.nav-links');
        
        menuToggle.addEventListener('click', () => {
            menuToggle.classList.toggle('active');
            navLinks.classList.toggle('active');
        });
        
        document.querySelectorAll('.nav-links a').forEach(link => {
            link.addEventListener('click', () => {
                menuToggle.classList.remove('active');
                navLinks.classList.remove('active');
            });
        });
        
        // Scroll reveal animation
        const revealElements = document.querySelectorAll('.reveal');
        
        const revealOnScroll = () => {
            revealElements.forEach(element => {
                const elementTop = element.getBoundingClientRect().top;
                if (elementTop < window.innerHeight - 100) {
                    element.classList.add('active');
                }
            });
        };
        
        window.addEventListener('scroll', revealOnScroll);
        window.addEventListener('load', revealOnScroll);
        
        // Lightbox
        const lightbox = document.getElementById('lightbox');
        const lightboxImg = document.getElementById('lightbox-img');
        
        function openLightbox(element) {
            lightboxImg.src = element.querySelector('img').src;
            lightbox.classList.add('active');
            document.body.style.overflow = 'hidden';
        }
        
        function closeLightbox() {
            lightbox.classList.remove('active');
            document.body.style.overflow = '';
        }
        
        lightbox.addEventListener('click', (e) => {
            if (e.target === lightbox) closeLightbox();
        });
        
        // Close modals on Escape
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeLightbox();
                closeChocolateModal();
            }
        });
        
        document.getElementById('chocolateModal').addEventListener('click', (e) => {
            if (e.target.classList.contains('chocolate-modal')) closeChocolateModal();
        });
        
        // Smooth scroll
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function(e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) target.scrollIntoView({ behavior: 'smooth', block: 'start' });
            });
        });
        
        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            initChocolates();
            loadSavedImages();
            initPrices();
            loadFeatureStates();
            checkCookieConsent();
            
            // Init analytics if consent given
            if (localStorage.getItem('chezrose_cookie_consent') === 'accepted') {
                initAnalytics();
            }
        });
        
        // ============ ADMIN FUNCTIONS ============
        
        // Admin password (changez-le!)
        const ADMIN_PASSWORD = 'chezrose2025';
        
        // Image mapping for the site
        const imageMapping = {
            'hero': { selector: '.hero-image > img', adminId: 'admin-hero-img', default: 'images/boutique-main.png' },
            'about1': { selector: '.about-images img:nth-child(1)', adminId: 'admin-about1-img', default: 'images/logo-wall.jpeg' },
            'about2': { selector: '.about-images img:nth-child(2)', adminId: 'admin-about2-img', default: 'images/vitrine-new.png' },
            'about3': { selector: '.about-images img:nth-child(3)', adminId: 'admin-about3-img', default: 'images/chocolats-display.png' },
            'product1': { selector: '.products-grid .product-card:nth-child(1) .product-image img', adminId: 'admin-product1-img', default: 'images/bonbons2.jpeg' },
            'product2': { selector: '.products-grid .product-card:nth-child(2) .product-image img', adminId: 'admin-product2-img', default: 'images/dragees.jpeg' },
            'product3': { selector: '.products-grid .product-card:nth-child(3) .product-image img', adminId: 'admin-product3-img', default: 'images/noel.jpeg' },
            'gallery1': { selector: '.gallery-grid .gallery-item:nth-child(1) img', adminId: 'admin-gallery1-img', default: 'images/comptoir-new.png' },
            'gallery2': { selector: '.gallery-grid .gallery-item:nth-child(2) img', adminId: 'admin-gallery2-img', default: 'images/vitrine2.jpeg' },
            'gallery3': { selector: '.gallery-grid .gallery-item:nth-child(3) img', adminId: 'admin-gallery3-img', default: 'images/comptoir2-new.png' },
            'gallery4': { selector: '.gallery-grid .gallery-item:nth-child(4) img', adminId: 'admin-gallery4-img', default: 'images/cadeaux.jpeg' },
            'gallery5': { selector: '.gallery-grid .gallery-item:nth-child(5) img', adminId: 'admin-gallery5-img', default: 'images/logo-wall.jpeg' }
        };
        
        // Login Modal
        function openLoginModal() {
            document.getElementById('adminLoginModal').classList.add('active');
            document.getElementById('adminPassword').value = '';
            document.getElementById('loginError').textContent = '';
            document.getElementById('adminPassword').focus();
        }
        
        function closeLoginModal() {
            document.getElementById('adminLoginModal').classList.remove('active');
        }
        
        function checkPassword() {
            const password = document.getElementById('adminPassword').value;
            if (password === ADMIN_PASSWORD) {
                closeLoginModal();
                openAdminPanel();
            } else {
                document.getElementById('loginError').textContent = 'Mot de passe incorrect';
                document.getElementById('adminPassword').value = '';
            }
        }
        
        // Admin Panel
        function closeAdminPanel() {
            document.getElementById('adminPanel').classList.remove('active');
            document.body.style.overflow = '';
        }
        
        // Sync admin panel images with current site images
        function syncAdminImages() {
            Object.keys(imageMapping).forEach(key => {
                const mapping = imageMapping[key];
                const siteImg = document.querySelector(mapping.selector);
                const adminImg = document.getElementById(mapping.adminId);
                if (siteImg && adminImg) {
                    adminImg.src = siteImg.src;
                }
            });
        }
        
        // Update image
        function updateImage(key, input) {
            if (input.files && input.files[0]) {
                const file = input.files[0];
                
                // Check file size (max 5MB)
                if (file.size > 5 * 1024 * 1024) {
                    showToast('âš ï¸ Image trop volumineuse (max 5MB)');
                    return;
                }
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    const imageData = e.target.result;
                    
                    // Update site image
                    const mapping = imageMapping[key];
                    const siteImg = document.querySelector(mapping.selector);
                    const adminImg = document.getElementById(mapping.adminId);
                    
                    if (siteImg) siteImg.src = imageData;
                    if (adminImg) adminImg.src = imageData;
                    
                    // Save to localStorage
                    saveImageToStorage(key, imageData);
                    
                    showToast('âœ“ Image mise Ã  jour avec succÃ¨s');
                };
                reader.readAsDataURL(file);
            }
        }
        
        // Reset single image
        function resetImage(key) {
            const mapping = imageMapping[key];
            const siteImg = document.querySelector(mapping.selector);
            const adminImg = document.getElementById(mapping.adminId);
            
            if (siteImg) siteImg.src = mapping.default;
            if (adminImg) adminImg.src = mapping.default;
            
            // Remove from localStorage
            localStorage.removeItem('chezrose_img_' + key);
            
            showToast('âœ“ Image rÃ©initialisÃ©e');
        }
        
        // Reset all images
        function resetAllImages() {
            if (confirm('ÃŠtes-vous sÃ»r de vouloir rÃ©initialiser toutes les images ?')) {
                Object.keys(imageMapping).forEach(key => {
                    const mapping = imageMapping[key];
                    const siteImg = document.querySelector(mapping.selector);
                    const adminImg = document.getElementById(mapping.adminId);
                    
                    if (siteImg) siteImg.src = mapping.default;
                    if (adminImg) adminImg.src = mapping.default;
                    
                    localStorage.removeItem('chezrose_img_' + key);
                });
                
                showToast('âœ“ Toutes les images ont Ã©tÃ© rÃ©initialisÃ©es');
            }
        }
        
        // Save image to localStorage
        function saveImageToStorage(key, imageData) {
            try {
                localStorage.setItem('chezrose_img_' + key, imageData);
            } catch (e) {
                console.warn('Impossible de sauvegarder dans localStorage:', e);
                showToast('âš ï¸ Stockage local plein');
            }
        }
        
        // Load saved images on page load
        function loadSavedImages() {
            Object.keys(imageMapping).forEach(key => {
                const savedImage = localStorage.getItem('chezrose_img_' + key);
                if (savedImage) {
                    const mapping = imageMapping[key];
                    const siteImg = document.querySelector(mapping.selector);
                    if (siteImg) {
                        siteImg.src = savedImage;
                    }
                }
            });
        }
        
        // Close modals when clicking outside
        document.getElementById('adminLoginModal').addEventListener('click', (e) => {
            if (e.target.classList.contains('admin-login-modal')) closeLoginModal();
        });
        
        document.getElementById('adminPanel').addEventListener('click', (e) => {
            if (e.target.classList.contains('admin-panel')) closeAdminPanel();
        });
        
        // ============ STRIPE CONFIGURATION ============
        
        function openAdminPanel() {
            document.getElementById('adminPanel').classList.add('active');
            document.body.style.overflow = 'hidden';
            syncAdminImages();
            loadStripeConfig();
            loadPrices();
            loadOrders();
        }
        
        function loadStripeConfig() {
            const publicKey = localStorage.getItem('chezrose_stripe_public') || '';
            const secretKey = localStorage.getItem('chezrose_stripe_secret') || '';
            const gaId = localStorage.getItem('chezrose_ga_id') || '';
            
            document.getElementById('stripePublicKey').value = publicKey;
            document.getElementById('stripeSecretKey').value = secretKey;
            document.getElementById('gaId').value = gaId;
            
            updateStripeStatus(!!publicKey);
        }
        
        function saveAnalyticsConfig() {
            const gaId = document.getElementById('gaId').value.trim();
            localStorage.setItem('chezrose_ga_id', gaId);
            showToast('âœ“ Configuration Analytics enregistrÃ©e');
            
            // Reinit analytics if consent given
            if (localStorage.getItem('chezrose_cookie_consent') === 'accepted' && gaId) {
                initAnalytics();
            }
        }
        
        function updateStripeStatus(isConfigured) {
            const statusIndicator = document.querySelector('.status-indicator');
            const statusText = document.getElementById('paymentStatusText');
            
            if (isConfigured) {
                statusIndicator.classList.add('active');
                statusText.textContent = 'ConfigurÃ© âœ“';
            } else {
                statusIndicator.classList.remove('active');
                statusText.textContent = 'Non configurÃ©';
            }
        }
        
        function saveStripeConfig() {
            const publicKey = document.getElementById('stripePublicKey').value.trim();
            const secretKey = document.getElementById('stripeSecretKey').value.trim();
            
            if (publicKey && !publicKey.startsWith('pk_')) {
                showToast('âš ï¸ La clÃ© publique doit commencer par pk_');
                return;
            }
            
            if (secretKey && !secretKey.startsWith('sk_')) {
                showToast('âš ï¸ La clÃ© secrÃ¨te doit commencer par sk_');
                return;
            }
            
            localStorage.setItem('chezrose_stripe_public', publicKey);
            localStorage.setItem('chezrose_stripe_secret', secretKey);
            
            updateStripeStatus(!!publicKey);
            showToast('âœ“ Configuration Stripe enregistrÃ©e');
        }
        
        function testStripeConnection() {
            const publicKey = document.getElementById('stripePublicKey').value.trim();
            const resultDiv = document.getElementById('stripeTestResult');
            
            if (!publicKey) {
                resultDiv.className = 'test-result error';
                resultDiv.textContent = 'âŒ Veuillez entrer une clÃ© publique Stripe';
                return;
            }
            
            try {
                const testStripe = Stripe(publicKey);
                resultDiv.className = 'test-result success';
                resultDiv.textContent = 'âœ“ Connexion rÃ©ussie ! La clÃ© publique est valide.';
            } catch (e) {
                resultDiv.className = 'test-result error';
                resultDiv.textContent = 'âŒ Erreur : ' + e.message;
            }
        }
        
        // ============ PRICES CONFIGURATION ============
        
        function loadPrices() {
            const prices = JSON.parse(localStorage.getItem('chezrose_prices') || '{}');
            
            document.getElementById('price250').value = prices['250'] || 12.50;
            document.getElementById('price375').value = prices['375'] || 18.75;
            document.getElementById('price500').value = prices['500'] || 25.00;
            document.getElementById('price750').value = prices['750'] || 37.50;
            document.getElementById('price1000').value = prices['1000'] || 50.00;
        }
        
        function savePrices() {
            const prices = {
                '250': parseFloat(document.getElementById('price250').value) || 12.50,
                '375': parseFloat(document.getElementById('price375').value) || 18.75,
                '500': parseFloat(document.getElementById('price500').value) || 25.00,
                '750': parseFloat(document.getElementById('price750').value) || 37.50,
                '1000': parseFloat(document.getElementById('price1000').value) || 50.00
            };
            
            localStorage.setItem('chezrose_prices', JSON.stringify(prices));
            showToast('âœ“ Prix enregistrÃ©s');
            
            // Update ballotin cards display
            updateBallotinPrices(prices);
        }
        
        function updateBallotinPrices(prices) {
            const cards = document.querySelectorAll('.ballotin-card');
            const weights = ['250', '375', '500', '750', '1000'];
            
            cards.forEach((card, index) => {
                const weight = weights[index];
                const price = prices[weight];
                const priceDisplay = card.querySelector('.ballotin-price');
                if (priceDisplay) {
                    priceDisplay.textContent = formatPrice(price);
                }
                
                // Update onclick
                const pieces = [25, 37, 50, 75, 100][index];
                card.onclick = () => selectBallotin(parseInt(weight), pieces, price);
            });
        }
        
        // ============ ORDERS MANAGEMENT ============
        
        function loadOrders() {
            const orders = JSON.parse(localStorage.getItem('chezrose_orders') || '[]');
            const ordersList = document.getElementById('ordersList');
            
            if (orders.length === 0) {
                ordersList.innerHTML = '<p class="no-orders">Aucune commande pour le moment</p>';
                return;
            }
            
            let html = '';
            orders.slice(0, 20).forEach(order => {
                const date = new Date(order.date).toLocaleDateString('fr-FR', {
                    day: '2-digit',
                    month: '2-digit',
                    year: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                });
                
                const statusBadge = order.status === 'paid' 
                    ? '<span style="color: #27ae60;">âœ“ PayÃ©</span>' 
                    : '<span style="color: #e67e22;">â³ En attente</span>';
                
                const deliveryNames = { pickup: 'ðŸª Retrait', colissimo: 'ðŸ“¦ Colissimo', express: 'ðŸš€ Express' };
                const deliveryType = order.delivery ? deliveryNames[order.delivery.type] || 'Retrait' : 'ðŸª Retrait';
                const total = order.totals ? order.totals.total : order.ballotin.price;
                
                html += `
                    <div class="order-item">
                        <div class="order-item-header">
                            <span class="order-id">${order.id}</span>
                            <span class="order-date">${date}</span>
                        </div>
                        <div class="order-customer">
                            ${order.customer.firstName} ${order.customer.lastName} - ${order.customer.phone}
                        </div>
                        <div style="font-size: 0.8rem; color: var(--text-light);">${order.customer.email}</div>
                        <div style="display: flex; justify-content: space-between; margin-top: 0.5rem;">
                            <span>Ballotin ${order.ballotin.weight >= 1000 ? '1kg' : order.ballotin.weight + 'g'} ${deliveryType}</span>
                            <span class="order-total">${formatPrice(total)} ${statusBadge}</span>
                        </div>
                    </div>
                `;
            });
            
            ordersList.innerHTML = html;
        }
        
        function exportOrders() {
            const orders = JSON.parse(localStorage.getItem('chezrose_orders') || '[]');
            
            if (orders.length === 0) {
                showToast('Aucune commande Ã  exporter');
                return;
            }
            
            // Create CSV content
            let csv = 'ID;Date;PrÃ©nom;Nom;Email;TÃ©lÃ©phone;Ballotin;Sous-total;Livraison;Total;Mode livraison;Statut;Notes\n';
            
            orders.forEach(order => {
                const date = new Date(order.date).toLocaleDateString('fr-FR');
                const weight = order.ballotin.weight >= 1000 ? '1kg' : order.ballotin.weight + 'g';
                const subtotal = order.totals ? order.totals.subtotal : order.ballotin.price;
                const shipping = order.totals ? order.totals.shipping : 0;
                const total = order.totals ? order.totals.total : order.ballotin.price;
                const deliveryType = order.delivery ? order.delivery.type : 'pickup';
                
                csv += `${order.id};${date};${order.customer.firstName};${order.customer.lastName};${order.customer.email};${order.customer.phone};${weight};${subtotal}â‚¬;${shipping}â‚¬;${total}â‚¬;${deliveryType};${order.status};${(order.customer.notes || '').replace(/;/g, ',')}\n`;
            });
            
            // Download CSV
            const blob = new Blob(['\ufeff' + csv], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = `commandes_chezrose_${new Date().toISOString().split('T')[0]}.csv`;
            link.click();
            
            showToast('âœ“ Export terminÃ©');
        }
        
        // Load prices on page load and update ballotin cards
        function initPrices() {
            const prices = JSON.parse(localStorage.getItem('chezrose_prices') || '{}');
            if (Object.keys(prices).length > 0) {
                updateBallotinPrices(prices);
            }
        }
        
        // ============ FEATURE TOGGLES ============
        
        function toggleFeature(feature, enabled) {
            localStorage.setItem(`chezrose_feature_${feature}`, enabled ? 'enabled' : 'disabled');
            applyFeatureState(feature, enabled);
            showToast(enabled ? `âœ“ ${getFeatureName(feature)} activÃ©` : `âœ— ${getFeatureName(feature)} dÃ©sactivÃ©`);
        }
        
        function getFeatureName(feature) {
            const names = {
                'ballotin': 'Commande de ballotins',
                'whatsapp': 'Bouton WhatsApp',
                'phone': 'Bouton Appel'
            };
            return names[feature] || feature;
        }
        
        function applyFeatureState(feature, enabled) {
            switch(feature) {
                case 'ballotin':
                    const ballotinCard = document.querySelector('.product-card:first-child');
                    if (enabled) {
                        document.body.classList.remove('ballotin-disabled');
                        if (ballotinCard) {
                            ballotinCard.style.display = '';
                        }
                    } else {
                        document.body.classList.add('ballotin-disabled');
                        if (ballotinCard) {
                            ballotinCard.style.display = 'none';
                        }
                    }
                    break;
                    
                case 'whatsapp':
                    const whatsappBtn = document.querySelector('.whatsapp-float');
                    if (whatsappBtn) {
                        whatsappBtn.classList.toggle('hidden', !enabled);
                    }
                    break;
                    
                case 'phone':
                    const phoneLinks = document.querySelectorAll('a[href^="tel:"]');
                    phoneLinks.forEach(link => {
                        if (enabled) {
                            link.classList.remove('phone-disabled');
                            link.style.pointerEvents = '';
                        } else {
                            link.classList.add('phone-disabled');
                            link.style.pointerEvents = 'none';
                        }
                    });
                    break;
            }
        }
        
        function loadFeatureStates() {
            const features = ['ballotin', 'whatsapp', 'phone'];
            features.forEach(feature => {
                const state = localStorage.getItem(`chezrose_feature_${feature}`);
                const enabled = state !== 'disabled'; // Default to enabled
                
                // Update toggle in admin if exists
                const toggle = document.getElementById(`toggle${feature.charAt(0).toUpperCase() + feature.slice(1)}`);
                if (toggle) {
                    toggle.checked = enabled;
                }
                
                // Apply state
                applyFeatureState(feature, enabled);
            });
        }
        
        // ============ COOKIE MANAGEMENT ============
        
        function checkCookieConsent() {
            const consent = localStorage.getItem('chezrose_cookie_consent');
            if (!consent) {
                setTimeout(() => {
                    document.getElementById('cookieBanner').classList.add('show');
                }, 1500);
            }
        }
        
        function acceptCookies() {
            localStorage.setItem('chezrose_cookie_consent', 'accepted');
            document.getElementById('cookieBanner').classList.remove('show');
            initAnalytics();
        }
        
        function declineCookies() {
            localStorage.setItem('chezrose_cookie_consent', 'declined');
            document.getElementById('cookieBanner').classList.remove('show');
        }
        
        function initAnalytics() {
            // Google Analytics placeholder
            // Replace 'G-XXXXXXXXXX' with your actual GA4 ID
            const gaId = localStorage.getItem('chezrose_ga_id');
            if (gaId && localStorage.getItem('chezrose_cookie_consent') === 'accepted') {
                const script = document.createElement('script');
                script.src = `https://www.googletagmanager.com/gtag/js?id=${gaId}`;
                script.async = true;
                document.head.appendChild(script);
                
                window.dataLayer = window.dataLayer || [];
                function gtag(){dataLayer.push(arguments);}
                gtag('js', new Date());
                gtag('config', gaId);
            }
        }
        
        // ============ LEGAL MODALS ============
        
        const legalContent = {
            mentions: {
                title: 'Mentions LÃ©gales',
                content: `
                    <h3>Ã‰diteur du site</h3>
                    <p><strong>Chez Rose Chocolaterie</strong><br>
                    6 rue Wilson<br>
                    57510 Puttelange-aux-Lacs<br>
                    France</p>
                    <p>TÃ©lÃ©phone : 03 55 78 19 85<br>
                    Email : chezrosechocolat@gmail.com</p>
                    
                    <h3>Responsable de publication</h3>
                    <p>Le responsable de publication est le gÃ©rant de l'Ã©tablissement Chez Rose Chocolaterie.</p>
                    
                    <h3>HÃ©bergement</h3>
                    <p>Ce site est hÃ©bergÃ© par :<br>
                    [Nom de l'hÃ©bergeur]<br>
                    [Adresse de l'hÃ©bergeur]</p>
                    
                    <h3>PropriÃ©tÃ© intellectuelle</h3>
                    <p>L'ensemble du contenu de ce site (textes, images, vidÃ©os, logos) est la propriÃ©tÃ© exclusive de Chez Rose Chocolaterie ou de ses partenaires. Toute reproduction, reprÃ©sentation, modification, publication ou adaptation de tout ou partie des Ã©lÃ©ments du site est interdite sans autorisation Ã©crite prÃ©alable.</p>
                    
                    <h3>CrÃ©dits photos</h3>
                    <p>Les photographies prÃ©sentÃ©es sur ce site sont la propriÃ©tÃ© de Chez Rose Chocolaterie. Tous droits rÃ©servÃ©s.</p>
                `
            },
            cgv: {
                title: 'Conditions GÃ©nÃ©rales de Vente',
                content: `
                    <h3>Article 1 - Objet</h3>
                    <p>Les prÃ©sentes conditions gÃ©nÃ©rales de vente rÃ©gissent les relations contractuelles entre Chez Rose Chocolaterie et ses clients dans le cadre de la vente de chocolats et confiseries.</p>
                    
                    <h3>Article 2 - Prix</h3>
                    <p>Les prix sont indiquÃ©s en euros TTC. Chez Rose Chocolaterie se rÃ©serve le droit de modifier ses prix Ã  tout moment, les produits Ã©tant facturÃ©s sur la base des tarifs en vigueur au moment de la validation de la commande.</p>
                    
                    <h3>Article 3 - Commande</h3>
                    <p>La validation de la commande vaut acceptation des prix et description des produits. Toute commande passÃ©e sur le site constitue la formation d'un contrat conclu Ã  distance.</p>
                    
                    <h3>Article 4 - Paiement</h3>
                    <p>Le paiement s'effectue en ligne par carte bancaire via notre plateforme sÃ©curisÃ©e Stripe. Le paiement est dÃ©bitÃ© au moment de la validation de la commande.</p>
                    
                    <h3>Article 5 - Livraison et retrait</h3>
                    <p>Les produits peuvent Ãªtre retirÃ©s en boutique ou livrÃ©s Ã  l'adresse indiquÃ©e lors de la commande. Les dÃ©lais de livraison sont donnÃ©s Ã  titre indicatif. En cas de produits pÃ©rissables, la livraison express est recommandÃ©e.</p>
                    
                    <h3>Article 6 - Droit de rÃ©tractation</h3>
                    <p>ConformÃ©ment Ã  l'article L221-28 du Code de la consommation, le droit de rÃ©tractation ne s'applique pas aux denrÃ©es alimentaires pÃ©rissables.</p>
                    
                    <h3>Article 7 - RÃ©clamations</h3>
                    <p>Pour toute rÃ©clamation, contactez-nous par email Ã  chezrosechocolat@gmail.com ou par tÃ©lÃ©phone au 03 55 78 19 85.</p>
                    
                    <h3>Article 8 - DonnÃ©es personnelles</h3>
                    <p>Les informations collectÃ©es sont nÃ©cessaires au traitement de votre commande. Elles sont traitÃ©es conformÃ©ment Ã  notre politique de confidentialitÃ©.</p>
                    
                    <h3>Article 9 - Litiges</h3>
                    <p>En cas de litige, une solution amiable sera recherchÃ©e avant toute action judiciaire. Ã€ dÃ©faut, les tribunaux franÃ§ais seront seuls compÃ©tents.</p>
                `
            },
            privacy: {
                title: 'Politique de ConfidentialitÃ©',
                content: `
                    <h3>Collecte des donnÃ©es</h3>
                    <p>Nous collectons les donnÃ©es suivantes lors de votre commande :</p>
                    <ul>
                        <li>Nom et prÃ©nom</li>
                        <li>Adresse email</li>
                        <li>NumÃ©ro de tÃ©lÃ©phone</li>
                        <li>Adresse de livraison (si applicable)</li>
                    </ul>
                    
                    <h3>Utilisation des donnÃ©es</h3>
                    <p>Vos donnÃ©es sont utilisÃ©es pour :</p>
                    <ul>
                        <li>Traiter et suivre vos commandes</li>
                        <li>Vous contacter concernant votre commande</li>
                        <li>AmÃ©liorer nos services</li>
                    </ul>
                    
                    <h3>Cookies</h3>
                    <p>Notre site utilise des cookies pour :</p>
                    <ul>
                        <li>MÃ©moriser vos prÃ©fÃ©rences</li>
                        <li>Analyser le trafic du site (si vous acceptez)</li>
                        <li>AmÃ©liorer votre expÃ©rience de navigation</li>
                    </ul>
                    <p>Vous pouvez gÃ©rer vos prÃ©fÃ©rences de cookies Ã  tout moment via le bandeau de consentement.</p>
                    
                    <h3>Conservation des donnÃ©es</h3>
                    <p>Vos donnÃ©es sont conservÃ©es pendant la durÃ©e nÃ©cessaire au traitement de votre commande et conformÃ©ment aux obligations lÃ©gales (3 ans pour les donnÃ©es clients).</p>
                    
                    <h3>Vos droits</h3>
                    <p>ConformÃ©ment au RGPD, vous disposez des droits suivants :</p>
                    <ul>
                        <li>Droit d'accÃ¨s Ã  vos donnÃ©es</li>
                        <li>Droit de rectification</li>
                        <li>Droit Ã  l'effacement</li>
                        <li>Droit Ã  la portabilitÃ©</li>
                        <li>Droit d'opposition</li>
                    </ul>
                    <p>Pour exercer ces droits, contactez-nous Ã  chezrosechocolat@gmail.com</p>
                    
                    <h3>SÃ©curitÃ©</h3>
                    <p>Nous mettons en Å“uvre des mesures de sÃ©curitÃ© appropriÃ©es pour protÃ©ger vos donnÃ©es personnelles contre tout accÃ¨s non autorisÃ©.</p>
                    
                    <h3>Contact</h3>
                    <p>Pour toute question relative Ã  la protection de vos donnÃ©es :<br>
                    Email : chezrosechocolat@gmail.com<br>
                    Adresse : 6 rue Wilson, 57510 Puttelange-aux-Lacs</p>
                `
            }
        };
        
        function openLegalModal(type) {
            const content = legalContent[type];
            if (content) {
                document.getElementById('legalModalTitle').textContent = content.title;
                document.getElementById('legalModalContent').innerHTML = content.content;
                document.getElementById('legalModal').classList.add('active');
            }
        }
        
        function closeLegalModal() {
            document.getElementById('legalModal').classList.remove('active');
        }
        
        // ============ ADMIN STATS ============
        
        function loadAdminStats() {
            const orders = JSON.parse(localStorage.getItem('chezrose_orders') || '[]');
            
            // Calculate stats
            const totalOrders = orders.length;
            const totalRevenue = orders.reduce((sum, o) => sum + (o.totals ? o.totals.total : o.ballotin.price), 0);
            const paidOrders = orders.filter(o => o.status === 'paid').length;
            const pendingOrders = orders.filter(o => o.status === 'pending').length;
            
            // Update stats display if exists
            const statsContainer = document.getElementById('adminStats');
            if (statsContainer) {
                statsContainer.innerHTML = `
                    <div class="stat-card">
                        <span class="stat-value">${totalOrders}</span>
                        <span class="stat-label">Commandes totales</span>
                    </div>
                    <div class="stat-card chocolate">
                        <span class="stat-value">${formatPrice(totalRevenue)}</span>
                        <span class="stat-label">Chiffre d'affaires</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-value">${paidOrders}</span>
                        <span class="stat-label">Commandes payÃ©es</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-value">${pendingOrders}</span>
                        <span class="stat-label">En attente</span>
                    </div>
                `;
            }
        }
        
        // Update openAdminPanel to load stats and features
        const originalOpenAdminPanel = openAdminPanel;
        openAdminPanel = function() {
            document.getElementById('adminPanel').classList.add('active');
            document.body.style.overflow = 'hidden';
            syncAdminImages();
            loadStripeConfig();
            loadPrices();
            loadOrders();
            loadAdminStats();
            loadFeatureToggles();
        };
        
        function loadFeatureToggles() {
            const features = ['ballotin', 'whatsapp', 'phone'];
            features.forEach(feature => {
                const state = localStorage.getItem(`chezrose_feature_${feature}`);
                const enabled = state !== 'disabled';
                const toggleId = 'toggle' + feature.charAt(0).toUpperCase() + feature.slice(1);
                const toggle = document.getElementById(toggleId);
                if (toggle) {
                    toggle.checked = enabled;
                }
            });
        }
        
        // Close legal modal on click outside
        document.getElementById('legalModal').addEventListener('click', (e) => {
            if (e.target.classList.contains('legal-modal')) closeLegalModal();
        });
    </script>
    
    <!-- Stripe.js -->
    <script src="https://js.stripe.com/v3/"></script>
</body>
</html>
